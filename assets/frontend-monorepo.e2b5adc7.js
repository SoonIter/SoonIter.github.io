import{_ as a}from"./Post.vue_vue_type_script_setup_true_lang.9530b897.js";import{m as c,o as p,k as r,h as t,e as s,n as l}from"./app.8e820223.js";const i="/imgs/frontend-monorepo/project-topo-graph.png",y=s("div",{class:"markdown-body"},[s("p",null,"\u5728\u7EC4\u91CC\u8D1F\u8D23 monorepo \u6CBB\u7406\u5DE5\u5177\uFF0C\u6765\u5410\u69FD\u4E00\u4E0B\u524D\u7AEF monorepo \u7684\u73B0\u72B6"),s("h2",{id:"\u4E3A\u4EC0\u4E48\u4F7F\u7528-monorepo",tabindex:"-1"},[l("\u4E3A\u4EC0\u4E48\u4F7F\u7528 monorepo ? "),s("a",{class:"header-anchor",href:"#\u4E3A\u4EC0\u4E48\u4F7F\u7528-monorepo","aria-hidden":"true"},"#")]),s("p",null,[s("a",{href:"https://www.youtube.com/watch?v=flbz_5aMikw",target:"_blank",rel:"noopener"},"Why use a monorepo? - Youtube - Vercel")]),s("p",null,'\u8FD9\u4E2A\u89C6\u9891\u8868\u73B0\u4E86\u73B0\u5728\u5927\u591A\u6570\u4EBA\u7528 monorepo \u7684\u723D\u70B9, \u5373\u53EF\u4EE5\u4E0D\u8D70 "\u53D1\u5305" \u6D41\u7A0B \u6765\u4EE5 "\u5305" \u4E3A\u5355\u4F4D\u6765\u590D\u7528\u4EE3\u7801'),s("p",null,"\u6309\u4E4B\u524D\u7684\u5DE5\u4F5C\u6D41, \u540C\u65F6\u5F00\u53D1\u591A\u4E2A\u5305"),s("ol",null,[s("li",null,[s("p",null,[l("\u4FEE\u6539 "),s("code",null,"@hello/a@1.0.0"),l(" \u7684\u4EE3\u7801")])]),s("li",null,[s("p",null,[l("\u53D1\u5E03 "),s("code",null,"@hello/a@1.0.1"),l(" \u65B0\u5305")])]),s("li",null,[s("p",null,[s("code",null,"@hello/b"),l(" \u9879\u76EE\u4E2D\u5B89\u88C5\u65B0\u7248\u672C\u7684 A")])])]),s("p",null,[l("\u73B0\u5728\u7684\u5DE5\u4F5C\u6D41\uFF0C\u4FEE\u6539 "),s("code",null,"@hello/a"),l(" \u7684\u4EE3\u7801\u540E\uFF0C\u53EF\u4EE5\u7ACB\u5373\u53CD\u9988\u5230\u5F00\u53D1 "),s("code",null,"@hello/b"),l(" \u4E0A")]),s("p",null,"\u4F46\u4E3A\u4E86\u8FD9\u4E2A\u723D\u70B9, \u8981\u4ED8\u51FA\u591A\u5C11\u4EE3\u4EF7?"),s("h2",{id:"\u8FDE\u73AF\u6784\u5EFA-\u548C-\u4F9D\u8D56\u62D3\u6251",tabindex:"-1"},[l("\u8FDE\u73AF\u6784\u5EFA \u548C \u4F9D\u8D56\u62D3\u6251 "),s("a",{class:"header-anchor",href:"#\u8FDE\u73AF\u6784\u5EFA-\u548C-\u4F9D\u8D56\u62D3\u6251","aria-hidden":"true"},"#")]),s("p",null,[l("\u5BF9\u6BD4 Rust \u4E00\u4E2A "),s("code",null,"cargo build"),l(" \u89E3\u51B3\u4E00\u5207, JavaScript \u9700\u8981\u5404\u79CD\u9884\u7F16\u8BD1\u624B\u6BB5, \u6BD4\u5982\u5904\u7406 typescript, jsx, css \u7B49, \u5404\u5BB6\u90FD\u6709\u5404\u5BB6\u7684\u5904\u7406\u65B9\u6CD5, \u76F4\u63A5\u5206\u53D1 ts \u6E90\u7801\u4E0D\u518D\u53EF\u80FD. \u8FD9\u5BFC\u81F4, \u6BCF\u4E2A\u5305\u90FD\u6709\u72EC\u7ACB\u7684\u6784\u5EFA\u624B\u6BB5, \u751F\u6210\u4E2A "),s("code",null,"dist"),l(" \u76EE\u5F55\u4EC0\u4E48\u7684, \u901A\u5E38\u5199\u5728 "),s("code",null,"npm run build"),l(".")]),s("p",null,[l("\u4E8E\u662F\u9700\u8981\u4E13\u95E8\u7684\u5DE5\u5177\u6765\u5E2E\u6211\u4EEC\u5904\u7406 \u591A\u4E2A\u5305\u8FD0\u884C "),s("code",null,"npm run build"),l(" \u7684\u987A\u5E8F")]),s("blockquote",null,[s("p",null,"PS: \u89E3\u91CA\u6027\u8BED\u8A00\u9700\u8981\u7F16\u8BD1, \u7F16\u8BD1\u578B\u8BED\u8A00\u5206\u53D1\u6E90\u7801, \u8FD9\u662F\u4E0D\u662F\u6709\u4E00\u70B9\u53CC\u5411\u5954\u8D74\u4E86?")]),s("p",null,"\u4EE5\u8BE5\u9879\u76EE\u4E3A \u{1F330}"),s("ul",null,[s("li",null,"\u76EE\u5F55\u7ED3\u6784")]),s("pre",null,[s("code",{class:"language-txt"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u251C\u2500\u2500 apps")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2502   \u251C\u2500\u2500 web1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2502   \u2502   \u2514\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2502   \u2514\u2500\u2500 web2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2502       \u2514\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u251C\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u251C\u2500\u2500 packages")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2502   \u251C\u2500\u2500 component")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2502   \u2502   \u2514\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2502   \u2514\u2500\u2500 util")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2502       \u2514\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u251C\u2500\u2500 pnpm-lock.yaml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u251C\u2500\u2500 .npmrc")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2514\u2500\u2500 pnpm-workspace.yaml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}})])])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u251C\u2500\u2500 apps")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2502   \u251C\u2500\u2500 web1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2502   \u2502   \u2514\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2502   \u2514\u2500\u2500 web2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2502       \u2514\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u251C\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u251C\u2500\u2500 packages")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2502   \u251C\u2500\u2500 component")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2502   \u2502   \u2514\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2502   \u2514\u2500\u2500 util")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2502       \u2514\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u251C\u2500\u2500 pnpm-lock.yaml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u251C\u2500\u2500 .npmrc")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2514\u2500\u2500 pnpm-workspace.yaml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}})])])])])])]),s("ul",null,[s("li",null,"\u4F9D\u8D56\u5173\u7CFB")]),s("pre",null,[s("code",{class:"language-txt"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"  web1 -> component -> util")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"  web2 ->")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}})])])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"  web1 -> component -> util")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"  web2 ->")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}})])])])])])]),s("p",null,[l("monorepo \u5DE5\u5177\u6BD4\u5982 "),s("code",null,"pnpm run"),l(" \u548C "),s("code",null,"moon run"),l(" \u9700\u901A\u8FC7\u5206\u6790 "),s("code",null,"package.json"),l(", \u7B97\u51FA\u4E00\u4E2A\u6709\u5411\u65E0\u73AF\u56FE, \u5373\u62D3\u6734\u4F9D\u8D56, \u4FDD\u8BC1 task \u8FD0\u884C\u987A\u5E8F\u6B63\u786E")]),s("img",{"w-300px":"",src:i}),s("pre",null,[s("code",{class:"language-txt"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"util:build --> component:build --> web1:build --> (web1:test,e2e...)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}})])])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"util:build --> component:build --> web1:build --> (web1:test,e2e...)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}})])])])])])]),s("p",null,[s("code",null,"pnpm run"),l(" \u5230\u8FD9\u91CC\u5C31\u7ED3\u675F\u4E86, \u8FD9\u65F6\u82E5\u518D\u542F\u52A8 "),s("code",null,"web2:build"),l(", monorepo \u5DE5\u5177\u4F1A\u590D\u7528\u7F13\u5B58\u7684\u7ED3\u679C")]),s("pre",null,[s("code",{class:"language-txt"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"util:build(cached) -> component:build(cached) -> web2:build")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}})])])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"util:build(cached) -> component:build(cached) -> web2:build")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}})])])])])])]),s("h2",{id:"\u4EA7\u7269\u5F15\u5165-\u548C-\u6E90\u7801\u5F15\u5165",tabindex:"-1"},[l("\u4EA7\u7269\u5F15\u5165 \u548C \u6E90\u7801\u5F15\u5165 "),s("a",{class:"header-anchor",href:"#\u4EA7\u7269\u5F15\u5165-\u548C-\u6E90\u7801\u5F15\u5165","aria-hidden":"true"},"#")]),s("p",null,"build \u62D6\u7740\u8FD9\u6761\u53C8\u81ED\u53C8\u957F\u7684\u94FE\u8DEF\u8FD8\u7B97\u52C9\u5F3A\u53EF\u4EE5\u63A5\u53D7, start \u4E5F\u8981\u6DF1\u53D7\u5176\u7D2F"),s("pre",null,[s("code",{class:"language-txt"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"  web1 -> component -> util")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}})])])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"  web1 -> component -> util")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}})])])])])])]),s("p",null,"\u5728 monorepo \u4E0B\u5F00\u53D1\u6B64\u9879\u76EE, \u4F60\u8981\u7ECF\u5386\u5982\u4E0B"),s("ol",null,[s("li",null,[s("p",null,[s("strong",null,"\u591A\u5F00 start"),l(", \u9700\u624B\u52A8\u6309\u987A\u5E8F\u5F00\u542F "),s("code",null,"util:start"),l(),s("code",null,"component:start"),l(),s("code",null,"web1:start")])]),s("li",null,[s("p",null,[s("strong",null,"\u8D44\u6E90\u5904\u7406"),l(", \u628A less css \u7B49\u8D44\u6E90\u653E\u8FDB js \u4E2D\u53EF\u4EE5, \u4F46\u4E2D\u95F4\u54EA\u4E2A\u5305\u653E\u8FDB\u53BB\u4E86, \u60F3\u518D\u62FF\u51FA\u6765\u5C31\u5F88\u96BE\u4E86")])]),s("li",null,[s("p",null,[s("strong",null,"hmr \u6781\u6162"),l(", \u82E5\u4FEE\u6539 util \u7684\u6E90\u7801 -> util \u6784\u5EFA\u65B0\u7684\u4EA7\u7269 -> component \u76D1\u542C\u5230\u6E90\u7801\u6539\u53D8 -> component \u6784\u5EFA\u65B0\u7684\u4EA7\u7269 -> web1 \u76D1\u542C\u5230\u6E90\u7801\u6539\u53D8 -> web1 \u6784\u5EFA\u65B0\u7684\u4EA7\u7269, \u4E00\u987F\u8FDE\u73AF\u4E0B\u6765, \u6781\u6162\u7684 hmr \u5F80\u5F80\u96BE\u4EE5\u5FCD\u53D7")])]),s("li",null,[s("p",null,[s("strong",null,'\u590D\u6742\u5EA6 "\u9AD8\u5230\u6302"'),l(", \u4F8B\u5982")])])]),s("p",null,"\u5728 3 \u4E2D\u7684\u4F8B\u5B50\u91CC, \u589E\u52A0\u4E00\u6761\u4F9D\u8D56, \u8BA9 web1 \u53C8\u4F9D\u8D56 util"),s("pre",null,[s("code",{class:"language-txt"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"  web1 -> component -> util")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"       -> util")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}})])])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"  web1 -> component -> util")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"       -> util")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}})])])])])])]),s("p",null,[s("code",null,"\u6B64\u65F6\u82E5\u66F4\u6539 util \u6E90\u7801"),l(" --> "),s("code",null,"web1 \u548C component \u66F4\u65B0"),l(" --> "),s("code",null,"web1 \u76D1\u542C\u5230 component \u66F4\u65B0\u53C8\u8BE5\u66F4\u65B0")]),s("p",null,"\u5E76\u53D1\u591A\u4E2A hmr \u7684\u901F\u5EA6\u4F1A\u968F\u7740\u4F9D\u8D56\u62D3\u6734\u7684\u590D\u6742\u7A0B\u5EA6\u589E\u52A0, \u87BA\u65CB\u4E0B\u6ED1, \u751A\u81F3\u4F1A\u7B97\u4E0D\u660E\u767D\u800C\u65E0\u54CD\u5E94\u751A\u81F3\u6302\u6389"),s("p",null,"\u89E3\u51B3\u65B9\u6848\u5C31\u662F\u5F15\u5165\u6E90\u7801\u800C\u4E0D\u662F\u4E0A\u8FF0\u7684\u5F15\u5165\u4EA7\u7269, \u9700\u8981 web1 \u6709\u4E00\u4E2A\u5F3A\u5927\u7684 bundler, \u50CF cargo \u4E00\u6837\u7EDF\u4E00\u6784\u5EFA web1, component, util \u7684\u6240\u6709 ts \u6E90\u7801"),s("p",null,"\u5E76\u4E14\u4E0B\u6E38\u4E3B\u52A8\u914D\u5408\u7EDF\u4E00\u6784\u5EFA\u73AF\u5883, \u6BD4\u5982 jsx \u8BED\u6CD5, \u4E0D\u8981\u4E00\u4E2A\u4F7F\u7528 React \u4E00\u4E2A\u4F7F\u7528 Preact \u53CA\u5176\u4ED6\u7C7B\u4F3C\u7684\u7F16\u8BD1\u9B54\u6CD5"),s("p",null,"\u5F15\u5165\u6E90\u7801, \u5B9E\u9645\u4E0A\u662F\u6709\u70B9 magic \u7684, \u4FEE\u6539 bundler \u7684 resolve \u903B\u8F91, \u8BA9 resolve \u6253\u5230\u6E90\u7801\u5373\u53EF"),s("ul",null,[s("li",null,"\u5F00\u542F\u65B9\u5F0F 1 \u7528 mainFields \u5F00\u542F")]),s("pre",null,[s("code",{class:"language-js"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#E0A569"}},"module"),s("span",{style:{color:"#858585"}},"."),s("span",{style:{color:"#E0A569"}},"exports"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#CB7676"}},"="),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"  "),s("span",{style:{color:"#758575"}},"// ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#E0A569"}},"resolve"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#E0A569"}},"mainFields"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"["),s("span",{style:{color:"#C98A7D"}},"'my-dev'"),s("span",{style:{color:"#858585"}},","),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},"'jsnext:main'"),s("span",{style:{color:"#858585"}},","),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},"'module'"),s("span",{style:{color:"#858585"}},","),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},"'main'"),s("span",{style:{color:"#858585"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},"},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#B58451"}},"module"),s("span",{style:{color:"#8E8F8B"}},"."),s("span",{style:{color:"#B58451"}},"exports"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#AB5959"}},"="),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"  "),s("span",{style:{color:"#A0ADA0"}},"// ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#B58451"}},"resolve"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#B58451"}},"mainFields"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"["),s("span",{style:{color:"#B56959"}},"'my-dev'"),s("span",{style:{color:"#8E8F8B"}},","),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},"'jsnext:main'"),s("span",{style:{color:"#8E8F8B"}},","),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},"'module'"),s("span",{style:{color:"#8E8F8B"}},","),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},"'main'"),s("span",{style:{color:"#8E8F8B"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},"},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"})])])])])]),s("pre",null,[s("code",{class:"language-json"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"name"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"util"'),s("span",{style:{color:"#858585"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"main"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"dist/index.js"'),s("span",{style:{color:"#858585"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"my-dev"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"src/index.ts"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#758575"}},'// \u6216\u7528 "jsnext:main": "src/index.ts"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#758575"}},"// ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"name"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"util"'),s("span",{style:{color:"#8E8F8B"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"main"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"dist/index.js"'),s("span",{style:{color:"#8E8F8B"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"my-dev"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"src/index.ts"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#A0ADA0"}},'// \u6216\u7528 "jsnext:main": "src/index.ts"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#A0ADA0"}},"// ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"})])])])])]),s("p",null,[l("exports \u5B57\u6BB5\u540C\u4E0A, \u53EF\u89C1 "),s("a",{href:"https://vitejs.dev/config/shared-options.html#resolve-conditions",target:"_blank",rel:"noopener"},"Vite \u6587\u6863 resolve-conditions")]),s("ul",null,[s("li",null,"\u5F00\u542F\u65B9\u5F0F 2 \u7528 resolve.alias \u8C03")]),s("pre",null,[s("code",{class:"language-js"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#E0A569"}},"module"),s("span",{style:{color:"#858585"}},"."),s("span",{style:{color:"#E0A569"}},"exports"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#CB7676"}},"="),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#E0A569"}},"alias"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#C98A7D"}},"'@xxxx/util'"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#B8A965"}},"path"),s("span",{style:{color:"#858585"}},"."),s("span",{style:{color:"#A1B567"}},"resolve"),s("span",{style:{color:"#858585"}},"("),s("span",{style:{color:"#B8A965"}},"__dirname"),s("span",{style:{color:"#858585"}},","),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},"'../../packages/util/src/index.ts'"),s("span",{style:{color:"#858585"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},"},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#B58451"}},"module"),s("span",{style:{color:"#8E8F8B"}},"."),s("span",{style:{color:"#B58451"}},"exports"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#AB5959"}},"="),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#B58451"}},"alias"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#B56959"}},"'@xxxx/util'"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8C862B"}},"path"),s("span",{style:{color:"#8E8F8B"}},"."),s("span",{style:{color:"#6C7834"}},"resolve"),s("span",{style:{color:"#8E8F8B"}},"("),s("span",{style:{color:"#8C862B"}},"__dirname"),s("span",{style:{color:"#8E8F8B"}},","),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},"'../../packages/util/src/index.ts'"),s("span",{style:{color:"#8E8F8B"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},"},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"})])])])])]),s("blockquote",null,[s("p",null,"\u6CE8\u610F\u6846\u67B6\u53EF\u80FD\u7531\u4E8E\u6027\u80FD, loader \u9ED8\u8BA4\u5FFD\u7565 node_modules, \u6BD4\u5982 nextjs \u9700\u5F00\u542F")]),s("pre",null,[s("code",{class:"language-js"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"// next.config.js")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#758575"}}," * "),s("span",{style:{color:"#858585"}},"@"),s("span",{style:{color:"#CB7676"}},"type"),s("span",{style:{color:"#758575"}}," "),s("span",{style:{color:"#858585"}},"{"),s("span",{style:{color:"#A1B567"}},"import('next').NextConfig"),s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#758575"}}," */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E0A569"}},"module"),s("span",{style:{color:"#858585"}},"."),s("span",{style:{color:"#E0A569"}},"exports"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#CB7676"}},"="),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#E0A569"}},"transpilePackages"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"["),s("span",{style:{color:"#C98A7D"}},"'@xxx/util'"),s("span",{style:{color:"#858585"}},","),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},"'\u5305\u540D'"),s("span",{style:{color:"#858585"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"  "),s("span",{style:{color:"#758575"}},"// ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"// next.config.js")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}}," * "),s("span",{style:{color:"#8E8F8B"}},"@"),s("span",{style:{color:"#AB5959"}},"type"),s("span",{style:{color:"#A0ADA0"}}," "),s("span",{style:{color:"#8E8F8B"}},"{"),s("span",{style:{color:"#6C7834"}},"import('next').NextConfig"),s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}}," */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B58451"}},"module"),s("span",{style:{color:"#8E8F8B"}},"."),s("span",{style:{color:"#B58451"}},"exports"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#AB5959"}},"="),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#B58451"}},"transpilePackages"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"["),s("span",{style:{color:"#B56959"}},"'@xxx/util'"),s("span",{style:{color:"#8E8F8B"}},","),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},"'\u5305\u540D'"),s("span",{style:{color:"#8E8F8B"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"  "),s("span",{style:{color:"#A0ADA0"}},"// ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"})])])])])]),s("p",null,"\u4E4B\u540E\u5F00\u53D1\u53EA\u5F00\u542F\u4E00\u4E2A start \u5373\u53EF, \u7F3A\u70B9\u4E5F\u5F88\u660E\u663E"),s("ol",null,[s("li",null,[s("p",null,"\u9AD8\u5EA6\u4E00\u81F4\u7684\u6784\u5EFA\u73AF\u5883")]),s("li",null,[s("p",null,[l("\u6536\u655B\u81EA\u5B9A\u4E49\u6784\u5EFA\u884C\u4E3A, \u4E2D\u95F4\u5305\u60F3\u5728\u7F16\u8BD1\u65F6\u505A\u70B9\u4E8B\u60C5, \u6BD4\u5982\u66FF\u6362\u6389 "),s("code",null,"process.env.NODE__ENV"),l(" \u51E0\u4E4E\u4E0D\u53EF\u80FD\u4E86")])]),s("li",null,[s("p",null,"\u5F00\u53D1\u751F\u4EA7\u7684\u4E0D\u4E00\u81F4, \u53D1\u5305\u540E\u7684\u4EA7\u7269\u6302\u6389\u6D51\u7136\u4E0D\u77E5")]),s("li",null,[s("p",null,"\u4E3A\u4EC0\u4E48\u4E0D\u76F4\u63A5\u653E\u5F03 monorepo \u800C\u4F7F\u7528\u6E90\u7801\u6587\u4EF6\u5939\u5462 \u2026")])]),s("h2",{id:"\u96C6\u4E2D\u5F0F\u4F9D\u8D56\u7BA1\u7406",tabindex:"-1"},[l("\u96C6\u4E2D\u5F0F\u4F9D\u8D56\u7BA1\u7406 "),s("a",{class:"header-anchor",href:"#\u96C6\u4E2D\u5F0F\u4F9D\u8D56\u7BA1\u7406","aria-hidden":"true"},"#")]),s("p",null,[l("pnpm, Cargo \u4E2D\u7684 "),s("code",null,"overrides"),l(" \u90FD\u8981\u5199\u5728\u6839\u76EE\u5F55.")]),s("p",null,"\u7A76\u5176\u539F\u56E0, \u662F semver \u89E3\u6790\u7B56\u7565\u4EA7\u751F\u7684\u5168\u5C40\u9650\u5236\u4E0A\u4E0B\u6587, global constrain context"),s("p",null,"\u4E3A\u4E86\u4FBF\u4E8E\u7406\u89E3, \u6211\u4EEC\u53EF\u4EE5\u62BD\u8C61\u4E00\u4E0B, \u8BA4\u4E3A\u5728 monorepo \u4E2D\u5B89\u88C5\u4F9D\u8D56\u548C \u5355\u5305 \u4E0B\u5B89\u88C5\u4F9D\u8D56\u4E00\u6837\u7684, \u7ED9\u4E00\u6574\u4E2A monorepo \u5B89\u88C5\u4F9D\u8D56, \u76F8\u5F53\u4E8E\u7ED9\u4E00\u6574\u4E2A\u5927\u5305\u5B89\u88C5\u4F9D\u8D56."),s("p",null,"\u770B\u4E0B\u9762\u8FD9\u4E2A\u4F8B\u5B50"),s("p",null,"\u6211\u4EEC\u9996\u5148\u6709\u4E00\u4E2A a \u5305"),s("pre",null,[s("code",{class:"language-json"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"// a/package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"name"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"a"'),s("span",{style:{color:"#858585"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"dependencies"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"react"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"^18.2.0"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"// a/package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"name"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"a"'),s("span",{style:{color:"#8E8F8B"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"dependencies"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"react"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"^18.2.0"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"})])])])])]),s("p",null,[l("\u5B89\u88C5\u540E "),s("code",null,"a>react@18.2.0>loose-envify@1.4.0>js-token@4.0.0"),l(", \u5982\u679C\u8FD9\u4E2A\u662F\u4E2A monorepo, \u518D\u6765\u4E2A\u5982\u4E0B\u7684 b \u5305, \u5B83\u4F1A\u590D\u7528 react@18.2.0")]),s("pre",null,[s("code",{class:"language-json"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"// b/package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"name"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"b"'),s("span",{style:{color:"#858585"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"dependencies"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"react"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"^18.1.0"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"// b/package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"name"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"b"'),s("span",{style:{color:"#8E8F8B"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"dependencies"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"react"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"^18.1.0"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"})])])])])]),s("pre",null,[s("code",{class:"language-yaml"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"# pnpm-lock.yaml (\u7B80\u5316\u540E)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#429988"}},"libs/a"),s("span",{style:{color:"#858585"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#429988"}},"specifiers"),s("span",{style:{color:"#858585"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#429988"}},"react"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},"^18.2.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#429988"}},"dependencies"),s("span",{style:{color:"#858585"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#429988"}},"react"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#6394BF"}},"18.2.0")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#429988"}},"libs/b"),s("span",{style:{color:"#858585"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#429988"}},"specifiers"),s("span",{style:{color:"#858585"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#429988"}},"react"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},"^18.1.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#429988"}},"dependencies"),s("span",{style:{color:"#858585"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#429988"}},"react"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#6394BF"}},"18.2.0")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#429988"}},"/js-tokens/4.0.0"),s("span",{style:{color:"#858585"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#429988"}},"dev"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#4D9375"}},"false")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#429988"}},"/loose-envify/1.4.0"),s("span",{style:{color:"#858585"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#429988"}},"dependencies"),s("span",{style:{color:"#858585"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#429988"}},"js-tokens"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#6394BF"}},"4.0.0")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#429988"}},"/react/18.2.0"),s("span",{style:{color:"#858585"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#429988"}},"dependencies"),s("span",{style:{color:"#858585"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#429988"}},"loose-envify"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#6394BF"}},"1.4.0")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"# pnpm-lock.yaml (\u7B80\u5316\u540E)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#2F8A89"}},"libs/a"),s("span",{style:{color:"#8E8F8B"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#2F8A89"}},"specifiers"),s("span",{style:{color:"#8E8F8B"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#2F8A89"}},"react"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},"^18.2.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#2F8A89"}},"dependencies"),s("span",{style:{color:"#8E8F8B"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#2F8A89"}},"react"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#296AA3"}},"18.2.0")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#2F8A89"}},"libs/b"),s("span",{style:{color:"#8E8F8B"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#2F8A89"}},"specifiers"),s("span",{style:{color:"#8E8F8B"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#2F8A89"}},"react"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},"^18.1.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#2F8A89"}},"dependencies"),s("span",{style:{color:"#8E8F8B"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#2F8A89"}},"react"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#296AA3"}},"18.2.0")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#2F8A89"}},"/js-tokens/4.0.0"),s("span",{style:{color:"#8E8F8B"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#2F8A89"}},"dev"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#1C6B48"}},"false")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#2F8A89"}},"/loose-envify/1.4.0"),s("span",{style:{color:"#8E8F8B"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#2F8A89"}},"dependencies"),s("span",{style:{color:"#8E8F8B"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#2F8A89"}},"js-tokens"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#296AA3"}},"4.0.0")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#2F8A89"}},"/react/18.2.0"),s("span",{style:{color:"#8E8F8B"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#2F8A89"}},"dependencies"),s("span",{style:{color:"#8E8F8B"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#2F8A89"}},"loose-envify"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#296AA3"}},"1.4.0")]),l(`
`),s("span",{class:"line"})])])])])]),s("p",null,"\u751F\u6210\u7684\u7ED3\u6784"),s("pre",null,[s("code",{class:"language-bash"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"# a \u548C b \u4F7F\u7528\u76F8\u540C\u7684 react@18.2.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"a "),s("span",{style:{color:"#CB7676"}},">"),s("span",{style:{color:"#DBD7CA"}}," react@18.2.0 "),s("span",{style:{color:"#CB7676"}},">"),s("span",{style:{color:"#DBD7CA"}}," loose-envify@1.4.0 "),s("span",{style:{color:"#CB7676"}},">"),s("span",{style:{color:"#DBD7CA"}}," js-tokens@4.0.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"b /")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"# a \u548C b \u4F7F\u7528\u76F8\u540C\u7684 react@18.2.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"a "),s("span",{style:{color:"#AB5959"}},">"),s("span",{style:{color:"#393A34"}}," react@18.2.0 "),s("span",{style:{color:"#AB5959"}},">"),s("span",{style:{color:"#393A34"}}," loose-envify@1.4.0 "),s("span",{style:{color:"#AB5959"}},">"),s("span",{style:{color:"#393A34"}}," js-tokens@4.0.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"b /")]),l(`
`),s("span",{class:"line"})])])])])]),s("p",null,'\u82E5 b \u8FD9\u6761\u94FE\u8DEF\u4E0A\u4F46\u51E1\u4E0D\u540C\u4E00\u70B9, \u90FD\u4E0D\u80FD\u53EB\u505A "\u540C\u4E00\u4EFD react"'),s("pre",null,[s("code",{class:"language-bash"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"# \u5982\u679C\u8FD9\u6761\u94FE\u8DEF\u4E0A\u6709\u4E00\u70B9\u4E0D\u76F8\u540C, a \u548C b \u5B9E\u9645\u4F7F\u7528\u7684\u662F\u4E24\u4E2A React")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"a "),s("span",{style:{color:"#CB7676"}},">"),s("span",{style:{color:"#DBD7CA"}}," react@18.2.0 "),s("span",{style:{color:"#CB7676"}},">"),s("span",{style:{color:"#DBD7CA"}}," loose-envify@1.4.0 "),s("span",{style:{color:"#CB7676"}},">"),s("span",{style:{color:"#DBD7CA"}}," js-tokens@4.0.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"b "),s("span",{style:{color:"#CB7676"}},">"),s("span",{style:{color:"#DBD7CA"}}," react@18.2.0 "),s("span",{style:{color:"#CB7676"}},">"),s("span",{style:{color:"#DBD7CA"}}," loose-envify@1.4.0 "),s("span",{style:{color:"#CB7676"}},">"),s("span",{style:{color:"#DBD7CA"}}," js-tokens@5.0.0")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"# \u5982\u679C\u8FD9\u6761\u94FE\u8DEF\u4E0A\u6709\u4E00\u70B9\u4E0D\u76F8\u540C, a \u548C b \u5B9E\u9645\u4F7F\u7528\u7684\u662F\u4E24\u4E2A React")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"a "),s("span",{style:{color:"#AB5959"}},">"),s("span",{style:{color:"#393A34"}}," react@18.2.0 "),s("span",{style:{color:"#AB5959"}},">"),s("span",{style:{color:"#393A34"}}," loose-envify@1.4.0 "),s("span",{style:{color:"#AB5959"}},">"),s("span",{style:{color:"#393A34"}}," js-tokens@4.0.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"b "),s("span",{style:{color:"#AB5959"}},">"),s("span",{style:{color:"#393A34"}}," react@18.2.0 "),s("span",{style:{color:"#AB5959"}},">"),s("span",{style:{color:"#393A34"}}," loose-envify@1.4.0 "),s("span",{style:{color:"#AB5959"}},">"),s("span",{style:{color:"#393A34"}}," js-tokens@5.0.0")]),l(`
`),s("span",{class:"line"})])])])])]),s("p",null,"\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B, \u65E2\u53EF\u4EE5\u51CF\u5C11\u9700\u8981\u5B89\u88C5\u7684\u4F9D\u8D56, \u53C8\u53EF\u4EE5\u4F7F\u7528\u540C\u4E00\u4EFD react,"),s("p",null,"\u6240\u4EE5\u7ED9 a \u548C b \u5F62\u6210\u7684 monorepo \u5B89\u88C5\u4F9D\u8D56,\u4F60\u53EF\u4EE5\u8FD1\u4F3C\u7406\u89E3\u4E3A\u7ED9\u4EE5\u4E0B\u7684 c \u5355\u5305\u5B89\u88C5\u4F9D\u8D56"),s("blockquote",null,[s("p",null,"PS: \u6CE8\u610F\u662F\u8FD1\u4F3C\u54C8\uFF0C\u4E3A\u4E86\u4FBF\u4E8E\u7406\u89E3")]),s("pre",null,[s("code",{class:"language-json"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"// \u865A\u62DF c \u5305/package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"name"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"c"'),s("span",{style:{color:"#858585"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"dependencies"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"react"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"^18.2.0"'),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#758575"}},'// \u53D6\u4E2A "^18.2.0" \u548C "^18.1.0" \u90FD\u6EE1\u8DB3\u7684\u503C')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"// \u865A\u62DF c \u5305/package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"name"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"c"'),s("span",{style:{color:"#8E8F8B"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"dependencies"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"react"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"^18.2.0"'),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#A0ADA0"}},'// \u53D6\u4E2A "^18.2.0" \u548C "^18.1.0" \u90FD\u6EE1\u8DB3\u7684\u503C')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"})])])])])]),s("h3",{id:"monorepo-semver-\u5BC4",tabindex:"-1"},[l("monorepo + semver === '\u5BC4' "),s("a",{class:"header-anchor",href:"#monorepo-semver-\u5BC4","aria-hidden":"true"},"#")]),s("p",null,"\u4E0A\u8FF0\u60C5\u51B5\u53EA\u662F\u6700\u7406\u60F3\u60C5\u51B5, \u4E0B\u9762\u5C55\u793A\u4E00\u4E0B\u5E26\u6765\u7684\u95EE\u9898, \u5047\u8BBE monorepo \u4E2D"),s("pre",null,[s("code",{class:"language-txt"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},'a \u4F9D\u8D56 "react": "<=18.2.0"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},'b \u4F9D\u8D56 "react": ">=18.1.0"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}})])])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},'a \u4F9D\u8D56 "react": "<=18.2.0"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},'b \u4F9D\u8D56 "react": ">=18.1.0"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}})])])])])])]),s("p",null,"\u5F00\u53D1\u8005\u6839\u636E\u7684\u662F \u4EE5\u4E0B\u7684\u865A\u62DF c \u5305\u6765\u5B89\u88C5\u4F9D\u8D56"),s("pre",null,[s("code",{class:"language-txt"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},'\u865A\u62DF c \u4F9D\u8D56 "react": ">=18.1.0 && <=18.2.0"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}})])])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},'\u865A\u62DF c \u4F9D\u8D56 "react": ">=18.1.0 && <=18.2.0"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}})])])])])])]),s("p",null,[l("\u5F00\u53D1\u8005\u4E0B\u5230\u7684\u7248\u672C\u662F "),s("code",null,'"react": "18.2.0"'),l(", \u770B\u4F3C\u975E\u5E38\u5408\u7406\u5BF9\u4E0D\u5BF9 ?")]),s("p",null,"\u4F46\u5728b\u5305\u7684\u7528\u6237\u89D2\u5EA6\u6765\u770B, \u5374\u5403\u4E86\u762A"),s("p",null,[l("b\u5305\u7528\u6237\u4E0B\u8F7D\u5230 b \u6839\u636E semver "),s("code",null,'">=18.1.0"'),l(" \u4E0B\u5230\u4E86\u6700\u65B0 latest \u7684 "),s("code",null,"react@18.11.0"),l(" \u76F4\u63A5\u6302\u4E86")]),s("blockquote",null,[s("p",null,'"\u6211\u64E6, \u4F60\u5199\u7684 >=18.1.0 \u80CC\u5730\u91CC\u81EA\u5DF1\u7528\u7684\u662F >=18.1.0 && <=18.2.0, \u8001\u5B50\u7528\u7684\u662F 18.11.0, \u76F4\u63A5\u6302\u4E86"')]),s("p",null,[l("\u8FD9\u4E2A\u95EE\u9898\u540C\u6837\u51FA\u73B0\u5728 Cargo, \u7528\u6237\u4F7F\u7528 swc \u65F6 \u5C31\u96BE\u4EE5\u7EF4\u62A4 swc \u8FD9\u4E9B\u5305\u7684\u5185\u90E8\u5173\u7CFB, \u6240\u4EE5\u5C3D\u91CF\u53EA\u5F15\u5165 "),s("code",null,"swc_core"),l(" \u8FD9\u4E00\u4E2A\u5305, \u7279\u6027\u7531 features \u5F00\u5173.")]),s("p",null,"\u4F46\u8BDD\u53C8\u8BF4\u56DE\u6765, \u4F60\u867D\u7136\u4EE5 monorepo \u5F00\u53D1, \u4F46\u53EA\u66B4\u9732\u4E00\u4E2A\u5305\u4F5C\u4E3A\u5165\u53E3, \u662F\u4E0D\u662F\u548C\u5355\u4ED3\u6CA1\u6709\u533A\u522B\u4E86 ?"),s("h2",{id:"\u81ED\u540D\u662D\u8457\u7684-\u627E\u4E0D\u5230\u5305-\u2013-cannot-found-module-xxx",tabindex:"-1"},[l('\u81ED\u540D\u662D\u8457\u7684 \u627E\u4E0D\u5230\u5305 \u2013 Cannot found module "xxx" '),s("a",{class:"header-anchor",href:"#\u81ED\u540D\u662D\u8457\u7684-\u627E\u4E0D\u5230\u5305-\u2013-cannot-found-module-xxx","aria-hidden":"true"},"#")]),s("h3",{id:"\u5E7B\u5F71\u4F9D\u8D56",tabindex:"-1"},[l("\u5E7B\u5F71\u4F9D\u8D56 "),s("a",{class:"header-anchor",href:"#\u5E7B\u5F71\u4F9D\u8D56","aria-hidden":"true"},"#")]),s("p",null,[l("\u7531\u4E8E npm \u5C06\u6240\u6709\u4F9D\u8D56 hoist \u5230 node_modules, node \u9010\u7EA7\u5411\u4E0A\u67E5\u627E node_modules \u65F6\u53EF\u4EE5\u627E\u5230\u672A\u58F0\u660E\u5230 "),s("code",null,"package.json"),l(" \u4E2D\u7684\u4F9D\u8D56, \u9020\u6210\u5F00\u53D1\u53EF\u7528\u4F46\u53D1\u5305\u540E\u62A5 "),s("code",null,'Cannot found module "xxx"')]),s("p",null,[l("\u89E3\u51B3\u65B9\u6CD5\u662F\u7528 \u5305\u7BA1\u7406\u5668\u7ED9\u7684\u540E\u95E8,\u6BD4\u5982 pnpm \u7684 "),s("code",null,"overrides"),l(),s("code",null,"packageExtensions"),l(),s("code",null,"hook.readPackage"),l(", \u4FEE\u590D\u4E09\u65B9\u5305\u6F0F\u5199\u7684,\u5199\u9519\u7684 "),s("code",null,"package.json")]),s("p",null,"\u4E14 pnpm \u91C7\u7528\u4E86 .pnpm + hardlink + symlink, \u6765\u9650\u5236\u9876\u5C42 hoist \u7684\u884C\u4E3A, \u7B97\u662F\u5DF2\u7ECF\u8F83\u597D\u5730\u89E3\u51B3, \u5BF9\u5F00\u53D1\u8D28\u91CF\u6709\u8FFD\u6C42\u7684\u5F00\u53D1\u8005\u5DF2\u7ECF\u7740\u624B\u4F7F\u7528 \u7C7B pnpm \u7684\u624B\u6BB5\u6765\u6CBB\u7406 hoist"),s("p",null,[l("\u4F46\u9020\u6210 "),s("code",null,"Cannot found module"),l(" \u7684, \u7EDD\u5BF9\u4E0D\u6B62 "),s("code",null,"shamefully-hoist"),l(" \u4E00\u4E2A")]),s("h3",{id:"devdependencies-\u9020\u6210\u7684\u5E7B\u5F71\u4F9D\u8D56",tabindex:"-1"},[l("devDependencies \u9020\u6210\u7684\u5E7B\u5F71\u4F9D\u8D56 "),s("a",{class:"header-anchor",href:"#devdependencies-\u9020\u6210\u7684\u5E7B\u5F71\u4F9D\u8D56","aria-hidden":"true"},"#")]),s("p",null,[l("\u5F00\u53D1\u73AF\u5883\u4E0B\uFF0C"),s("code",null,"devDeps"),l(" \u548C "),s("code",null,"deps"),l(" \u4F1A\u88AB\u65E0\u5DEE\u522B\u5730\u4E0B\u8F7D\u5230 "),s("code",null,"node_modules"),l(" \u4E2D, \u5F00\u53D1\u65F6\u53EF\u4EE5\u4E0D\u62A5\u9519\u5730 import devDependencies, \u800C\u53D1\u5305\u540E\u7531\u4E8E\u53EA\u5B89\u88C5 "),s("code",null,"deps"),l(" \u4E0D\u5B89\u88C5 "),s("code",null,"devDependencies"),l(" \u4F9D\u7136\u53EF\u4EE5\u9020\u6210 "),s("code",null,'Cannot found module "xxx"')]),s("p",null,[l("monorepo \u4E2D\u65E0\u7591\u5C06\u8FD9\u4E2A\u95EE\u9898\u653E\u5927\u4E86, \u5199 "),s("code",null,'"@xxx/util": "workspace:*"'),l(" \u660E\u660E\u53EF\u7528, \u6539\u6210 "),s("code",null,'"@xxx/util": "1.1.0"'),l(" \u5C31\u4E0D\u53EF\u7528\u4E86,")]),s("p",null,[l("\u548C\u4E0A\u4E00\u6761\u6E90\u7801\u5F15\u5165\u4E00\u6837, monorepo \u4F1A"),s("code",null,"\u653E\u5927\u5F00\u53D1\u548C\u751F\u4EA7\u73AF\u5883\u4E0D\u4E00\u81F4\u7684\u95EE\u9898"),l(', \u6211\u4EEC\u4F7F\u7528 monorepo \u4E2D\u7684 "\u5305", \u4F46\u6211\u4EEC\u5DF2\u7ECF\u8D85\u8FC7\u4E86 "\u5305" \u6240\u80FD\u89E6\u78B0\u5230\u7684\u8303\u56F4, \u8FD9\u4E00\u95EE\u9898\u5728\u4E0B\u4E00\u6761\u66F4\u52A0\u660E\u663E')]),s("h3",{id:"\u591A\u5B9E\u4F8B\u95EE\u9898\uFF0C\u4EE5\u53CA-monorepo-\u4E2D\u7684-dedupe",tabindex:"-1"},[l("\u591A\u5B9E\u4F8B\u95EE\u9898\uFF0C\u4EE5\u53CA monorepo \u4E2D\u7684 dedupe "),s("a",{class:"header-anchor",href:"#\u591A\u5B9E\u4F8B\u95EE\u9898\uFF0C\u4EE5\u53CA-monorepo-\u4E2D\u7684-dedupe","aria-hidden":"true"},"#")]),s("p",null,"\u6211\u76F8\u4FE1\u4F60\u5728 monorepo \u91CC\u5FC5\u5B9A\u9047\u5230\u8FC7 react \u591A\u5B9E\u4F8B\u95EE\u9898"),s("p",null,[l("\u4EE5\u8BE5\u9879\u76EE\u4E3A\u4F8B\uFF1Aweb \u548C component \u5747\u4F9D\u8D56 "),s("code",null,"react@^18"),l("\uFF0C\u7531\u4E8E\u4E00\u4E9B\u539F\u56E0\u4E0B\u8F7D\u5230\u4E86\u4E0D\u540C\u7684 react \u7248\u672C\u3002")]),s("pre",null,[s("code",{class:"language-txt"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u251C\u2500\u2500 pnpm-lock.yaml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u251C\u2500\u2500 pnpm-workspace.yaml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u251C\u2500\u2500 .npmrc")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u251C\u2500\u2500 apps")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2502   \u2514\u2500\u2500 web")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2502       \u251C\u2500\u2500 node_modules")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2502       \u2502   \u2514\u2500\u2500 react@18.2.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2502       \u2514\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"\u2514\u2500\u2500 packages")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"    \u2514\u2500\u2500 component")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"        \u251C\u2500\u2500 node_modules")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"        \u2502   \u2514\u2500\u2500 react@18.1.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"        \u2514\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}})])])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u251C\u2500\u2500 pnpm-lock.yaml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u251C\u2500\u2500 pnpm-workspace.yaml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u251C\u2500\u2500 .npmrc")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u251C\u2500\u2500 apps")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2502   \u2514\u2500\u2500 web")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2502       \u251C\u2500\u2500 node_modules")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2502       \u2502   \u2514\u2500\u2500 react@18.2.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2502       \u2514\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"\u2514\u2500\u2500 packages")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"    \u2514\u2500\u2500 component")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"        \u251C\u2500\u2500 node_modules")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"        \u2502   \u2514\u2500\u2500 react@18.1.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"        \u2514\u2500\u2500 package.json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}})])])])])])]),s("p",null,[l("\u7531\u4E8E node resolve \u9010\u7EA7\u5411\u4E0A\u67E5\u627E\u7684\u7279\u6027\uFF0C\u5F53 web \u5F15\u5165 component \u7684\u65F6\u5019\uFF0Cweb \u91CC\u7684\u6E90\u7801 resolve \u7684\u662F "),s("code",null,"react@18.2.0"),l("\uFF0Ccomponent \u7684\u6E90\u7801 resolve \u7684\u662F "),s("code",null,"react@18.1.0"),l("\uFF0C\u5168\u5C40\u4EA7\u751F\u4E86\u591A\u4E2A React \u5B9E\u4F8B")]),s("p",null,"\u8FD9\u9020\u6210\u4E86\u81F4\u547D\u6027\u7684\u95EE\u9898"),s("ol",null,[s("li",null,[s("p",null,[l("\u5BF9\u4E8E "),s("code",null,"React"),l("\uFF0C"),s("code",null,"React-dom"),l(", "),s("code",null,"React-router"),l("\uFF0C"),s("code",null,"Redux"),l(" \u8FD9\u79CD\u5168\u5C40\u5355\u4F8B\u7684\u5305\u6784\u5EFA\u6210\u529F\uFF0C\u4F46\u4F1A\u4EA7\u751F\u8FD0\u884C\u65F6\u9519\u8BEF")])]),s("li",null,[s("p",null,[l("\u91CD\u590D\u6253\u5305\u589E\u5927\u5305\u4F53\uFF0C\u800C\u4E14\u4E0D\u6B62\u91CD\u590D\u6253\u4E00\u4E2A\uFF0C\u662F\u6253\u4E00\u6574\u6761\u94FE\u8DEF\uFF0C"),s("code",null,"react@18.2.0>loose-envify@1.4.0>js-tokens@5.0.0"),l(" \u548C "),s("code",null,"react@18.1.0>loose-envify@1.3.0>js-tokens@4.0.0")])])]),s("p",null,[l("\u5E76\u4E14\u8FD9\u79CD\u60C5\u51B5\u4E0B "),s("code",null,"component"),l(" \u7684 "),s("code",null,"package.json"),l(" \u662F\u5426\u5199\u5BF9\u90FD\u6CA1\u6709\u7528\uFF0C\u5199\u8FDB "),s("code",null,"deps"),l(),s("code",null,"devDeps"),l(" \u8FD8\u662F "),s("code",null,"peerDeps"),l(", \u5728\u5F00\u53D1\u73AF\u5883\u4E0B\u8868\u73B0\u90FD\u662F\u4E00\u6837\u7684")]),s("p",null,[l("\u8FD9\u5728\u5355\u4ED3\u4E0B\u662F\u4E0D\u5E38\u9047\u5230\uFF0C\u56E0\u4E3A web \u4E0B\u8F7D component\uFF0C\u591A\u534A\u4F1A\u7531\u4E8E semver\uFF0C"),s("code",null,"react@^18"),l(" \u89E3\u6790\u5230\u540C\u4E00\u4E2A\u7248\u672C\uFF0C\u5E76\u4E14\u53EF\u4EE5\u4F7F\u7528 "),s("code",null,"peerDeps"),l(" \u6765\u4FDD\u8BC1\u7EC4\u4EF6\u5E93\u548C app \u4F9D\u8D56\u5230\u540C\u4E00\u4EFD react")]),s("h4",{id:"\u4E00\u5305\u4E00\u7248\u672C-\u2014\u2014-\u5F88\u591A\u8BED\u8A00",tabindex:"-1"},[l("\u4E00\u5305\u4E00\u7248\u672C \u2014\u2014 \u5F88\u591A\u8BED\u8A00 "),s("a",{class:"header-anchor",href:"#\u4E00\u5305\u4E00\u7248\u672C-\u2014\u2014-\u5F88\u591A\u8BED\u8A00","aria-hidden":"true"},"#")]),s("p",null,[l("\u8BB8\u591A\u8BED\u8A00\u91C7\u7528\u7684\u662F"),s("strong",null,"\u4E00\u5305\u4E00\u7248\u672C"),l("\u7684\u4F9D\u8D56, \u5728\u4F60 semver \u7248\u672C\u51B2\u7A81\u65F6\uFF0C\u4F1A\u76F4\u63A5\u8BA9\u4F60\u4E0D\u5B89\u8FD9\u4E2A\u4F9D\u8D56")]),s("p",null,[l("\u8FD9\u4E2A a \u5305\uFF0C\u4F9D\u8D56 "),s("code",null,"xxx@1.1.x"),l("\uFF0C\u5F53\u5F15\u5165 b \u5305 \u4F9D\u8D56 "),s("code",null,"xxx@1.2.x"),l("\uFF0C\u8FD9\u65F6\u76F4\u63A5\u62A5 resolve error\uFF0C\u5168\u5C40\u53EA\u5141\u8BB8\u5B58\u5728\u4E00\u4EFD")]),s("p",null,"\u8FD9\u6837\u5E26\u6765\u7684\u95EE\u9898\u5C31\u662F\uFF0C\u5BF9\u4E8E\u4E09\u65B9\u4F9D\u8D56\u7248\u672C\u53F7\u7684\u8981\u6C42\u8D8A\u6765\u8D8A\u82DB\u523B\u3002"),s("h4",{id:"\u4E00\u5305\u591A\u7248\u672C-\u2014\u2014-node-modules",tabindex:"-1"},[l("\u4E00\u5305\u591A\u7248\u672C \u2014\u2014 node_modules "),s("a",{class:"header-anchor",href:"#\u4E00\u5305\u591A\u7248\u672C-\u2014\u2014-node-modules","aria-hidden":"true"},"#")]),s("p",null,[l("node \u4E0B\u7684\u5305\u7BA1\u7406\uFF0C\u5141\u8BB8\u4E00\u4E2A\u5305\u5B58\u5728\u591A\u4E2A\u7248\u672C\uFF0C\u6BD4\u5982 "),s("code",null,"debug@5.0.0"),l(),s("code",null,"debug@4.0.0"),l(" \u53EF\u4EE5\u5171\u5B58\uFF0C\u4F46"),s("code",null,"react@18"),l(" \u548C "),s("code",null,"react@17"),l(" \u5B9E\u9645\u662F\u4E0D\u53EF\u4EE5\u5171\u5B58\u7684\u554A\uFF0C\u4E8E\u662F\u5C31\u5E26\u6765\u4E86\u5F00\u5934\u7684\u95EE\u9898\u3002")]),s("p",null,[l("\u751A\u81F3\u4F1A\u6709 "),s("code",null,"react@17"),l(" \u548C "),s("code",null,"react@18"),l(" \u9879\u76EE \u540C\u5904\u4E8E\u4E00\u4E2A monorepo\u4E0B\u9020\u6210\u8BB8\u591A\u95EE\u9898\u3002")]),s("h4",{id:"\u89E3\u51B3\u65B9\u6CD5-\u2014\u2014-monorepo\u4E2D\u7684-dedupe",tabindex:"-1"},[l("\u89E3\u51B3\u65B9\u6CD5 \u2014\u2014 monorepo\u4E2D\u7684 dedupe "),s("a",{class:"header-anchor",href:"#\u89E3\u51B3\u65B9\u6CD5-\u2014\u2014-monorepo\u4E2D\u7684-dedupe","aria-hidden":"true"},"#")]),s("p",null,[l("\u53BB\u9664\u91CD\u590D\u5305\uFF0C\u5C3D\u91CF\u9760\u8FD1 "),s("strong",null,"\u4E00\u5305\u4E00\u7248\u672C")]),s("p",null,[l("\u4F8B\u5982\uFF1A\u4F7F\u7528 "),s("code",null,"pnpm dedupe"),l(" \u6765\u51CF\u5C11\u91CD\u590D\u4F9D\u8D56\uFF0C"),s("code",null,"component -> react@^18.1.0"),l(" \u548C "),s("code",null,"app -> react@^18.2.0"),l("\uFF0C\u5C31\u5E94\u8BE5\u53EA\u5B89\u88C5\u4E00\u4EFD\uFF0C\u4F46\u5E26\u6765\u7684\u95EE\u9898\u662F monorepo \u4E2D\u5404\u5305\u9694\u79BB\u6027\u51CF\u5F31")]),s("p",null,"\u6216\u8005 \u7F16\u8BD1\u65F6 hack resolve\uFF0C\u624B\u52A8\u6307\u5411\u540C\u4E00\u4EFD react"),s("pre",null,[s("code",{class:"language-js"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"// webpack.config.js")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E0A569"}},"module"),s("span",{style:{color:"#858585"}},"."),s("span",{style:{color:"#E0A569"}},"exports"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#CB7676"}},"="),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#E0A569"}},"resolve"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#E0A569"}},"alias"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"      "),s("span",{style:{color:"#E0A569"}},"react"),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#B8A965"}},"path"),s("span",{style:{color:"#858585"}},"."),s("span",{style:{color:"#A1B567"}},"join"),s("span",{style:{color:"#858585"}},"("),s("span",{style:{color:"#B8A965"}},"__dirname"),s("span",{style:{color:"#858585"}},","),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},"'node_modules/react'"),s("span",{style:{color:"#858585"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"// webpack.config.js")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B58451"}},"module"),s("span",{style:{color:"#8E8F8B"}},"."),s("span",{style:{color:"#B58451"}},"exports"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#AB5959"}},"="),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#B58451"}},"resolve"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#B58451"}},"alias"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#B58451"}},"react"),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8C862B"}},"path"),s("span",{style:{color:"#8E8F8B"}},"."),s("span",{style:{color:"#6C7834"}},"join"),s("span",{style:{color:"#8E8F8B"}},"("),s("span",{style:{color:"#8C862B"}},"__dirname"),s("span",{style:{color:"#8E8F8B"}},","),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},"'node_modules/react'"),s("span",{style:{color:"#8E8F8B"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"})])])])])]),s("p",null,[l("\u8FD9\u4E2A hack \u7531\u4E8E\u7528\u7684\u592A\u591A\uFF0Cvite \u751A\u81F3\u76F4\u63A5\u652F\u6301\u4E86\u4E00\u4E2A "),s("code",null,"dedupe"),l(" \u5B57\u6BB5 "),s("img",{src:"https://vitejs.dev/config/shared-options.html#resolve-dedupe",alt:"Vite \u5B98\u65B9\u6587\u6863 \u2014\u2014 resolve-dedupe"})]),s("p",null,"\u4F46\u8FD8\u6709\u5F88\u591A\u573A\u666F\uFF0C\u65E0\u6CD5\u624B\u52A8\u6307\u5B9A resolve\uFF0C\u6240\u4EE5\u6211\u5F88\u7406\u89E3 yarn \u4E3A\u4EC0\u4E48\u8981\u505A pnp \u6A21\u5F0F\uFF0C\u6216\u8BB8 pnp \u624D\u662F\u672A\u6765 monorepo \u7684\u6807\u914D"),s("h2",{id:"\u7248\u672C\u53F7\u7BA1\u7406",tabindex:"-1"},[l("\u7248\u672C\u53F7\u7BA1\u7406 "),s("a",{class:"header-anchor",href:"#\u7248\u672C\u53F7\u7BA1\u7406","aria-hidden":"true"},"#")]),s("p",null,"\u53EF\u80FD\u4F60\u4F1A\u8BF4, \u6211\u7684\u53D1\u5305\u53EF\u4EE5\u4E25\u5B88 semver \u89C4\u8303, \u6BCF\u4E2A\u5927\u7248\u672C\u548C\u5C0F\u7248\u672C\u90FD\u6309\u89C4\u77E9\u63D0\u5347\u7248\u672C\u53F7\uFF0C\u662F\u4E0D\u662F\u95EE\u9898\u5C31\u5F88\u5C11\u4E86\uFF0C\u90A3\u4F60\u4E00\u5B9A\u4E0D\u77E5\u9053\u5728 monorepo \u4E0B\u7BA1\u7406\u7248\u672C\u53F7\u6709\u591A\u8D39\u52B2"),s("h3",{id:"changeset",tabindex:"-1"},[l("changeset "),s("a",{class:"header-anchor",href:"#changeset","aria-hidden":"true"},"#")]),s("p",null,[l("monorepo \u91CC changeset \u7684\u521B\u610F\u975E\u5E38\u597D\uFF0C\u6211\u4FEE\u6539\u54EA\u4E2A\u5305\u5C31\u589E\u52A0\u67D0\u4E2A\u5305\u7684 changeset\uFF0C"),s("code",null,"add-changeset"),l(" \u6765\u5B58\u50A8\u6BCF\u4E2A commit \u7684\u66F4\u65B0\u610F\u56FE\u3002\u7B49\u5230 "),s("code",null,"bump"),l(" \u548C \u53D1\u5305\u65F6\uFF0C\u518D\u6839\u636E\u4F9D\u8D56\u62D3\u6251\uFF0C\u66F4\u6539\u4E0A\u6E38\u7684\u5305\uFF0C\u6765\u540C\u6B65\u6700\u65B0\u7248\u672C\u3002")]),s("p",null,"\u4F46\u95EE\u9898\u968F\u4E4B\u800C\u6765\uFF0C\u5C31\u662F monorepo \u4E2D\u7684\u6240\u6709\u5305\uFF0C\u7248\u672C\u53F7\u53C2\u5DEE\u4E0D\u9F50\u3002"),s("p",null,[l("\u4E00\u4E2A a \u5305\u662F "),s("code",null,"@1.3.1"),l("\uFF0Cb \u5305\u53EF\u80FD\u662F "),s("code",null,"@2.0.0"),l("\uFF0Cc \u5305\u53EF\u80FD\u662F "),s("code",null,"@4.0.0")]),s("p",null,"\u5F00\u53D1\u8005\u7528\u7684\u8FD8\u597D\uFF0C\u7528\u6237\u76F4\u63A5\u53C8\u5403\u762A"),s("p",null,[l("\u4F7F\u7528\u4E86 "),s("code",null,"@xxx/a@1.3.1"),l(" \u7684\u7528\u6237\uFF0C\u60F3\u518D\u5B89\u4E00\u4E2A "),s("code",null,"@xxx/b"),l("\uFF0C\u4F46\u9009\u7248\u672C\u53F7\u7684\u65F6\u5019\u72AF\u4E86\u96BE\uFF0C\u8FD9\u4E9B\u5305\u770B\u4F3C\u5728\u4E00\u4E2A scope \u4E0B\uFF0C\u7248\u672C\u5374\u6BEB\u65E0\u5173\u8054\u3002")]),s("p",null,[l("\u4F60\u4E5F\u4E0D\u60F3\u4F7F\u7528 "),s("code",null,"react@18"),l(" \u518D\u5F15\u4E00\u4E2A "),s("code",null,"@types/react@19"),l(" \u5427")]),s("p",null,"\u7EF4\u62A4\u591A\u4E2A\u5305\uFF0C\u7EC8\u7A76\u8FD8\u662F\u590D\u6742\u7684\u3002"),s("h3",{id:"fixed-packages-linked-packages-\u548C-bumpp",tabindex:"-1"},[l("fixed-packages linked-packages \u548C bumpp "),s("a",{class:"header-anchor",href:"#fixed-packages-linked-packages-\u548C-bumpp","aria-hidden":"true"},"#")]),s("p",null,[l("\u90A3\uFF0C\u8BA9 monorepo \u7684\u5305\u4F7F\u7528\u540C\u4E00\u7248\u672C\u53F7\uFF0C\u7528\u6237\u7528 "),s("code",null,"react@18.2.0"),l(" \u81EA\u7136\u8054\u60F3\u5230\u8981\u88C5\u76F8\u540C\u7248\u672C\u7684 "),s("code",null,"react-dom@18.2.0"),l(" \u4E0D\u5C31\u597D\u4E86\u3002")]),s("p",null,[l("changeset \u63D0\u4F9B\u4E86 "),s("a",{href:"https://github.com/changesets/changesets/blob/main/docs/fixed-packages.md",target:"_blank",rel:"noopener"},"fixed"),l(" \u548C "),s("a",{href:"https://github.com/changesets/changesets/blob/main/docs/linked-packages.md",target:"_blank",rel:"noopener"},"linked"),l(" \u4E24\u79CD\u6A21\u5F0F\u4F9B\u7528\u6237\u9009\u62E9\u3002")]),s("p",null,[l("antfu \u7684 bumpp \u5219\u76F4\u63A5\u5168\u4ED3\u5E93 "),s("code",null,"bump patch/minor/major"),l(" \u6765\u66F4\u65B0\u7248\u672C\u53F7")]),s("p",null,"\u7F3A\u70B9\u663E\u800C\u6613\u89C1\uFF0C\u6211\u7684\u5305\u7248\u672C\u4E0D\u9075\u5FAA semver \u89C4\u8303\u4E86"),s("p",null,"\u603B\u7ED3\uFF0Cmonorepo \u4F1A\u8BA9\u5F00\u53D1\u8005\u723D\uFF0C\u4F46\u4E5F\u53EA\u80FD\u723D\u4E00\u534A\uFF0C\u8FD8\u4F1A\u8BA9\u7528\u6237\u4E0D\u723D\u3002"),s("p",null,'\u7531\u4E8E\u4EE5\u4E0A\u95EE\u9898, \u6211\u4EEC\u91CD\u65B0\u601D\u8003, \u4EE5 "\u5305" \u4E3A\u5355\u4F4D\u590D\u7528\u4EE3\u7801\u7684 monorepo , \u5E26\u6765\u7684\u8FD9\u4E2A\u590D\u6742\u5EA6\u662F\u5426\u503C\u5F97'),s("p",null,[l("pnpm \u4F5C\u8005\u6240\u5728\u7684\u516C\u53F8\u5F00\u53D1\u4E86 "),s("a",{href:"https://bit.dev/",target:"_blank",rel:"noopener"},"Bit"),l(' , \u5DF2\u7ECF\u4E0D\u4EE5 "\u5305" \u4E3A\u5355\u4F4D\u5206\u53D1\u4EE3\u7801, \u800C\u662F\u4EE5 "\u7EC4\u4EF6" \u4E3A\u5355\u4F4D, \u7EC4\u7EC7\u65B9\u5F0F\u4E5F\u662F\u4E00\u4E2A\u4E00\u4E2A\u7684\u6E90\u7801\u6587\u4EF6\u5939,\u4E0D\u8FC7\u589E\u52A0\u4E86\u6587\u4EF6\u7ED3\u6784\u7684\u7EA6\u675F, \u65E0\u9700\u5199\u7E41\u91CD\u7684 package.json \uFF0C\u5177\u4F53\u662F\u5426\u597D\u7528\u8FD8\u8981\u7531\u65F6\u95F4\u53BB\u68C0\u9A8C')]),s("h2",{id:"\u53C2\u8003",tabindex:"-1"},[l("\u53C2\u8003 "),s("a",{class:"header-anchor",href:"#\u53C2\u8003","aria-hidden":"true"},"#")]),s("ul",null,[s("li",null,[l("[1]"),s("a",{href:"https://juejin.cn/post/6944877410827370504",target:"_blank",rel:"noopener"},"\u73B0\u4EE3\u524D\u7AEF\u5DE5\u7A0B\u4E3A\u4EC0\u4E48\u8D8A\u6765\u8D8A\u79BB\u4E0D\u5F00 Monorepo?")]),s("li",null,[l("[2]"),s("a",{href:"https://rustwiki.org/en/cargo/reference/resolver.html#dependency-resolution",target:"_blank",rel:"noopener"},"Cargo Book \u2014\u2014 Dependency Resolution")]),s("li",null,[l("[3]"),s("a",{href:"https://vitejs.dev/config/shared-options.html#resolve-dedupe",target:"_blank",rel:"noopener"},"Vite \u6587\u6863 \u2014\u2014 resolve-dedupe")])])],-1),k="\u524D\u7AEF monorepo \u4E4B\u6B87",D="\u524D\u7AEF monorepo \u5B58\u5728\u54EA\u4E9B\u95EE\u9898\uFF0C\u600E\u4E48\u7BA1\u7406\u524D\u7AEF monorepo \uFF1F",g="2023-04-06T00:00:00.000Z",b="zh",f="30min",E="frontend-monorepo/pnpm.png",C=[{property:"og:title",content:"\u524D\u7AEF monorepo \u4E4B\u6B87"},{property:"og:description",content:"\u524D\u7AEF monorepo \u5B58\u5728\u54EA\u4E9B\u95EE\u9898\uFF0C\u600E\u4E48\u7BA1\u7406\u524D\u7AEF monorepo \uFF1F"},{name:"description",content:"\u524D\u7AEF monorepo \u5B58\u5728\u54EA\u4E9B\u95EE\u9898\uFF0C\u600E\u4E48\u7BA1\u7406\u524D\u7AEF monorepo \uFF1F"},{property:"og:image",content:"frontend-monorepo/pnpm.png"},{name:"twitter:card",content:"summary_large_image"}],F={__name:"frontend-monorepo",setup(d,{expose:o}){const n={title:"\u524D\u7AEF monorepo \u4E4B\u6B87",description:"\u524D\u7AEF monorepo \u5B58\u5728\u54EA\u4E9B\u95EE\u9898\uFF0C\u600E\u4E48\u7BA1\u7406\u524D\u7AEF monorepo \uFF1F",date:"2023-04-06T00:00:00.000Z",lang:"zh",duration:"30min",image:"frontend-monorepo/pnpm.png",meta:[{property:"og:title",content:"\u524D\u7AEF monorepo \u4E4B\u6B87"},{property:"og:description",content:"\u524D\u7AEF monorepo \u5B58\u5728\u54EA\u4E9B\u95EE\u9898\uFF0C\u600E\u4E48\u7BA1\u7406\u524D\u7AEF monorepo \uFF1F"},{name:"description",content:"\u524D\u7AEF monorepo \u5B58\u5728\u54EA\u4E9B\u95EE\u9898\uFF0C\u600E\u4E48\u7BA1\u7406\u524D\u7AEF monorepo \uFF1F"},{property:"og:image",content:"frontend-monorepo/pnpm.png"},{name:"twitter:card",content:"summary_large_image"}]};return o({frontmatter:n}),c({title:"\u524D\u7AEF monorepo \u4E4B\u6B87",meta:[{property:"og:title",content:"\u524D\u7AEF monorepo \u4E4B\u6B87"},{property:"og:description",content:"\u524D\u7AEF monorepo \u5B58\u5728\u54EA\u4E9B\u95EE\u9898\uFF0C\u600E\u4E48\u7BA1\u7406\u524D\u7AEF monorepo \uFF1F"},{name:"description",content:"\u524D\u7AEF monorepo \u5B58\u5728\u54EA\u4E9B\u95EE\u9898\uFF0C\u600E\u4E48\u7BA1\u7406\u524D\u7AEF monorepo \uFF1F"},{property:"og:image",content:"frontend-monorepo/pnpm.png"},{name:"twitter:card",content:"summary_large_image"}]}),(A,B)=>{const e=a;return p(),r(e,{frontmatter:n},{default:t(()=>[y]),_:1})}}};export{g as date,F as default,D as description,f as duration,E as image,b as lang,C as meta,k as title};
