import{_ as a}from"./Post.vue_vue_type_script_setup_true_lang.4faa9011.js";import{m as t,o as r,k as i,h as c,e,n as o}from"./app.5f316c77.js";const p="/imgs/third-party-cookie/cross-origin.png",d="/imgs/third-party-cookie/tld+1.png",h="/imgs/third-party-cookie/cross-site.png",u="/imgs/third-party-cookie/partitioned.png",y=e("div",{class:"markdown-body"},[e("p",null,[e("div",{class:"table-of-contents"},[e("ul",null,[e("li",null,[e("a",{href:"#\u8DE8\u57DF-cross-origin-\u548C-\u8DE8\u7AD9-cross-site"},"\u8DE8\u57DF(cross-origin) \u548C \u8DE8\u7AD9(cross-site) "),e("ul",null,[e("li",null,[e("a",{href:"#\u8DE8\u57DF-cross-origin"},"\u8DE8\u57DF cross-origin ")]),e("li",null,[e("a",{href:"#\u8DE8\u7AD9-cross-site"},"\u8DE8\u7AD9 cross-site ")])])]),e("li",null,[e("a",{href:"#samesite"},"SameSite ")]),e("li",null,[e("a",{href:"#\u5F71\u54CD\u8303\u56F4\uFF1F"},"\u5F71\u54CD\u8303\u56F4\uFF1F ")]),e("li",null,[e("a",{href:"#\u89E3\u51B3\u65B9\u6848\uFF1F"},"\u89E3\u51B3\u65B9\u6848\uFF1F ")]),e("li",null,[e("a",{href:"#\u9644\u5F55"},"\u9644\u5F55 ")]),e("li",null,[e("a",{href:"#\u5F15\u7528"},"\u5F15\u7528 ")])])])]),e("h2",{id:"\u8DE8\u57DF-cross-origin-\u548C-\u8DE8\u7AD9-cross-site",tabindex:"-1"},[o("\u8DE8\u57DF(cross-origin) \u548C \u8DE8\u7AD9(cross-site) "),e("a",{class:"header-anchor",href:"#\u8DE8\u57DF-cross-origin-\u548C-\u8DE8\u7AD9-cross-site","aria-hidden":"true"},"#")]),e("h3",{id:"\u8DE8\u57DF-cross-origin",tabindex:"-1"},[o("\u8DE8\u57DF cross-origin "),e("a",{class:"header-anchor",href:"#\u8DE8\u57DF-cross-origin","aria-hidden":"true"},"#")]),e("p",null,"\u540C\u6E90\uFF1A\u534F\u8BAE\u3001\u4E3B\u673A\u3001\u7AEF\u53E3\u90FD\u4E00\u81F4"),e("p",null,[e("img",{src:p,alt:"cross-origin"})]),e("pre",null,[e("code",null,[e("div",{class:"shiki-container"},[e("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{color:"#dbd7ca"}},"\uFF081\uFF09 Cookie\u3001LocalStorage \u548C IndexDB \u65E0\u6CD5\u8BFB\u53D6\u3002")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#dbd7ca"}},"\uFF082\uFF09 DOM \u65E0\u6CD5\u83B7\u5F97\u3002")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#dbd7ca"}},"\uFF083\uFF09 AJAX \u8BF7\u6C42\u4E0D\u80FD\u53D1\u9001\u3002")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#dbd7ca"}})])])]),e("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{color:"#393a34"}},"\uFF081\uFF09 Cookie\u3001LocalStorage \u548C IndexDB \u65E0\u6CD5\u8BFB\u53D6\u3002")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#393a34"}},"\uFF082\uFF09 DOM \u65E0\u6CD5\u83B7\u5F97\u3002")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#393a34"}},"\uFF083\uFF09 AJAX \u8BF7\u6C42\u4E0D\u80FD\u53D1\u9001\u3002")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#393a34"}})])])])])])]),e("h3",{id:"\u8DE8\u7AD9-cross-site",tabindex:"-1"},[o("\u8DE8\u7AD9 cross-site "),e("a",{class:"header-anchor",href:"#\u8DE8\u7AD9-cross-site","aria-hidden":"true"},"#")]),e("p",null,"\u540C\u7AD9\uFF1A\u5177\u6709\u76F8\u540C eTLD+1\uFF0C\u5373\u76F8\u540C\u7684\u534F\u8BAE+\u76F8\u540C\u7684\u4E8C\u7EA7\u57DF\u540D"),e("p",null,[e("a",{href:"https://a.xxx.com",target:"_blank",rel:"noopener"},"https://a.xxx.com"),o(" \u548C "),e("a",{href:"https://b.xxx.com",target:"_blank",rel:"noopener"},"https://b.xxx.com"),o(" \u76F8\u540C\u7684\u4E8C\u7EA7\u57DF\u540D\uFF0C\u662F\u540C\u7AD9")]),e("p",null,[e("img",{src:d,alt:"tld+1"})]),e("p",null,[e("img",{src:h,alt:"cross-site"})]),e("h2",{id:"samesite",tabindex:"-1"},[o("SameSite "),e("a",{class:"header-anchor",href:"#samesite","aria-hidden":"true"},"#")]),e("p",null,"Chrome 51 \u8D77\uFF0CCookie \u65B0\u589E SameSite \u5C5E\u6027\uFF0C\u7528\u6765\u9632\u6B62 CSRF \u653B\u51FB (\u5B89\u5168) \u548C\u7528\u6237\u8FFD\u8E2A (\u9690\u79C1)\u3002"),e("ul",null,[e("li",null,[e("p",null,"Strict\uFF08\u4E25\u683C\uFF09\uFF1A\u5F53\u8BBE\u7F6E\u4E3A Strict \u65F6\uFF0C\u6D4F\u89C8\u5668\u5C06\u53EA\u5728\u5F53\u524D\u7F51\u9875\u7684\u57DF\u540D\u4E0E Cookie \u6240\u5C5E\u7684\u57DF\u540D\u5B8C\u5168\u4E00\u81F4\u7684\u60C5\u51B5\u4E0B\u624D\u53D1\u9001\u8BE5 Cookie \u3002")]),e("li",null,[e("p",null,"Lax\uFF08\u5BBD\u677E\uFF09\uFF1A\u5F53\u8BBE\u7F6E\u4E3A Lax \u65F6\uFF0C\u6D4F\u89C8\u5668\u5C06\u5728\u5BFC\u822A\u5230\u76EE\u6807\u7F51\u9875\u7684\u60C5\u51B5\u4E0B\u53D1\u9001 Cookie\uFF0C\u4F46\u4EC5\u9650\u4E8E\u9876\u7EA7\u5BFC\u822A\uFF08\u5982\u70B9\u51FB\u94FE\u63A5\u6216\u901A\u8FC7 URL \u5BFC\u822A\uFF09\u3002\u5728\u8DE8\u57DF\u7684 POST \u8BF7\u6C42\u6216\u901A\u8FC7 iframe \u52A0\u8F7D\u7684\u8BF7\u6C42\u4E2D\uFF0C\u6D4F\u89C8\u5668\u5C06\u4E0D\u4F1A\u53D1\u9001 Cookie\u3002")]),e("li",null,[e("p",null,"None\uFF08\u65E0\uFF09\uFF1A\u5F53\u8BBE\u7F6E\u4E3A None \u65F6\uFF0C\u6D4F\u89C8\u5668\u5C06\u59CB\u7EC8\u53D1\u9001 Cookie\uFF0C\u65E0\u8BBA\u8BF7\u6C42\u662F\u540C\u7AD9\u70B9\u8FD8\u662F\u8DE8\u7AD9\u70B9\u3002\u4F46\u662F\uFF0C\u8981\u4F7F\u7528 None \u503C\uFF0C\u8FD8\u9700\u8981\u540C\u65F6\u8BBE\u7F6E Secure \u5C5E\u6027\uFF0C\u4EE5\u786E\u4FDD\u4EC5\u5728\u4F7F\u7528 HTTPS \u5B89\u5168\u8FDE\u63A5\u65F6\u53D1\u9001 Cookie\u3002")])]),e("p",null,[o("Chrome 80 \u8D77\uFF0C\u9ED8\u8BA4\u4F1A\u7ED9\u7B2C\u4E09\u65B9 Cookie \u6DFB\u52A0 SameSite=Lax \u5C5E\u6027\uFF0CA \u57DF\u540D\u8DE8\u57DF\u8BF7\u6C42 B \u57DF\u540D\uFF0C\u4E0D\u4F1A\u643A\u5E26 Cookie\u3002 \u5982\u679C\u8981\u4F7F\u7528\u4E09\u65B9 Cookie\uFF0C\u9700\u663E\u5F0F\u8BBE\u7F6E "),e("code",null,"SameSite=None; Secure")]),e("p",null,[o("Chrome 118 \u5F00\u59CB\u6709\u7B2C\u4E09\u65B9 Cookie \u7684\u8B66\u544A\uFF0C2024 \u5E74 Q1-Q3 \u9010\u6B65\u7981\u7528 "),e("code",null,"SameSite=None; Secure"),o("\uFF0C\u8BF7\u6C42\u65F6\u65E0\u6CD5\u8BFB\u53D6\u5E76\u643A\u5E26 "),e("code",null,"SameSite=None;Secure"),o(" \u7684 Cookie\uFF0C\u54CD\u5E94 "),e("code",null,"Set-Cookie: xxx=xx;SameSite=None;Secure"),o(" \u65F6\u4E5F\u65E0\u6CD5\u5199\u5165")]),e("h2",{id:"\u5F71\u54CD\u8303\u56F4\uFF1F",tabindex:"-1"},[o("\u5F71\u54CD\u8303\u56F4\uFF1F "),e("a",{class:"header-anchor",href:"#\u5F71\u54CD\u8303\u56F4\uFF1F","aria-hidden":"true"},"#")]),e("p",null,[o("\u6D4B\u8BD5\u8BBE\u7F6E\u4F4D\u4E8E "),e("a",{href:"chrome://flags/#test-third-party-cookie-phaseout"},"chrome://flags/#test-third-party-cookie-phaseout")]),e("ul",null,[e("li",null,"\u524D\u7AEF\u76D1\u63A7\uFF1A\u4E0A\u62A5\u7684\u63A5\u53E3\u4E3A\u8DE8\u7AD9\u63A5\u53E3\uFF0C\u901A\u8FC7\u4E09\u65B9 Cookie \u6765\u5B58\u50A8\u4E00\u4E2A\u7528\u6237\u6807\u8BC6\uFF1B"),e("li",null,"\u7EDF\u4E00\u767B\u5F55\uFF1A\u901A\u8FC7\u7EDF\u4E00\u7684\u8DE8\u7AD9 SSO \u63A5\u53E3\u4E3A\u7F51\u7AD9\u5B9E\u73B0\u5355\u70B9\u767B\u5F55\u80FD\u529B\uFF0C\u5171\u4EAB\u7528\u6237\u8EAB\u4EFD\uFF1B"),e("li",null,"\u5E7F\u544A\u4E1A\u52A1\uFF1A\u901A\u8FC7\u4E09\u65B9 Cookie \u5B58\u50A8\u7528\u6237\u6807\u8BC6\uFF0C\u7528\u4E8E\u8FDB\u884C\u5E7F\u544A\u5F52\u56E0\u6216\u5174\u8DA3\u63A8\u8350\uFF1B"),e("li",null,"CSRF \uFF1A\u901A\u8FC7 Cookie \u5B58\u50A8 CSRF Token \u4FE1\u606F\uFF0C\u8DE8\u7AD9\u8BF7\u6C42\u5219\u4E3A\u4E09\u65B9 Cookie\uFF1B"),e("li",null,"iframe\uFF1A\u901A\u7528\u7684\u804A\u5929\u3001\u5730\u56FE\u7B49 iframe\uFF0C\u901A\u8FC7\u4E09\u65B9 Cookie \u6765\u5171\u4EAB\u4E00\u4E9B\u72B6\u6001\uFF1B")]),e("h2",{id:"\u89E3\u51B3\u65B9\u6848\uFF1F",tabindex:"-1"},[o("\u89E3\u51B3\u65B9\u6848\uFF1F "),e("a",{class:"header-anchor",href:"#\u89E3\u51B3\u65B9\u6848\uFF1F","aria-hidden":"true"},"#")]),e("h4",{id:"_1-\u53D8\u66F4\u643A\u5E26\u4F4D\u7F6E-\u5B58\u50A8\u4F4D\u7F6E",tabindex:"-1"},[o("1. \u53D8\u66F4\u643A\u5E26\u4F4D\u7F6E+\u5B58\u50A8\u4F4D\u7F6E "),e("a",{class:"header-anchor",href:"#_1-\u53D8\u66F4\u643A\u5E26\u4F4D\u7F6E-\u5B58\u50A8\u4F4D\u7F6E","aria-hidden":"true"},"#")]),e("p",null,[o("\u4E0D\u7528 "),e("code",null,"Cookie"),o(" \u548C "),e("code",null,"Set-Cookie"),o("\uFF0C\u6539\u6210\u5176\u4ED6\u5730\u65B9\uFF0C\u643A\u5E26\u4F4D\u7F6E\u6539\u5230 query\u3001\u8BF7\u6C42\u5934\u3001\u8BF7\u6C42\u4F53\uFF0C\u5B58\u50A8\u4F4D\u7F6E\u6539\u5230 localStorage\u3001sessionStorage\u3001indexDB \u7B49")]),e("p",null,"\u4F18\u70B9: \u81EA\u7531\u5EA6\u9AD8"),e("p",null,"\u7F3A\u70B9: \u6539\u52A8\u8F83\u5927"),e("h4",{id:"_2-\u670D\u52A1\u7AEF\u4EE3\u7406",tabindex:"-1"},[o("2. \u670D\u52A1\u7AEF\u4EE3\u7406 "),e("a",{class:"header-anchor",href:"#_2-\u670D\u52A1\u7AEF\u4EE3\u7406","aria-hidden":"true"},"#")]),e("p",null,[o("\u4F8B\u5982\u5728 "),e("code",null,"a.com"),o(" \u57DF\u540D\u53D1\u8D77\u8BF7\u6C42 "),e("code",null,"b.com/update"),o(" \uFF0C\u4EE3\u7406\u5C06\u8C03\u7528\u6539\u5199\u4E3A "),e("code",null,"a.com/proxy/b.com/update")]),e("p",null,"\u4F18\u70B9\uFF1A\u7565\u5FAE\u51CF\u5C11\u4E86\u6539\u9020\u6210\u672C"),e("p",null,"\u7F3A\u70B9: \u6539\u52A8\u8F83\u5927\uFF0C\u670D\u52A1\u7AEF\u6D41\u91CF\uFF0C\u589E\u52A0\u6210\u672C"),e("h4",{id:"_3-cookie-chips",tabindex:"-1"},[o("3. Cookie CHIPS "),e("a",{class:"header-anchor",href:"#_3-cookie-chips","aria-hidden":"true"},"#")]),e("p",null,"\u8BA9\u4E09\u65B9 iframe \u5D4C\u5165\u53D1\u8D77\u7684\u8DE8\u7AD9\u8BF7\u6C42\u7684\u4F9D\u7136\u53EF\u4EE5\u643A\u5E26\u4E09\u65B9 Cookie"),e("p",null,[o("\u89E3\u51B3\u4E09\u65B9 Cookie \u95EE\u9898\u7684\u63D0\u6848\u4E2D\uFF0C\u5176\u5B9E\u8FD8\u6709\u4E00\u4E2A\u63D0\u6848\u662F "),e("code",null,"SameParty"),o("\uFF0C\u610F\u5473\u6807\u8BB0\u540C\u4E00\u65B9\u7684 Cookie\u3002\u6700\u7EC8\u91C7\u7EB3\u7684\u662F "),e("code",null,"Partitioned"),o("\uFF0C\u4E0D\u8FC7\u53EF\u4EE5\u8FBE\u5230\u5DEE\u4E0D\u591A\u7684\u6548\u679C\u3002")]),e("p",null,[e("img",{src:u,alt:"partitioned"})]),e("p",null,"\u901A\u8FC7\u8BBE\u7F6E Partitioned\uFF0C\u5C31\u53EF\u4EE5\u5C06\u7AD9\u70B9\u9009\u62E9\u5C06 Cookie \u5B58\u50A8\u5728\u7531\u9876\u7EA7\u7AD9\u70B9\u5206\u533A\u7684\u5355\u72EC Cookie jar \u4E2D\u3002\u6BD4\u5982\u6211\u4EEC\u5728\u7AD9\u70B9 A \u4E2D\u901A\u8FC7 iframe \u5D4C\u5165\u4E86\u4E00\u4E2A\u7AD9\u70B9 C\uFF0C\u6B63\u5E38\u60C5\u51B5\u4E0B\u5982\u679C\u4E09\u65B9 Cookie \u88AB\u7981\u7528\u540E\uFF0CC \u662F\u65E0\u6CD5\u5728 A \u7AD9\u70B9\u8BBF\u95EE\u5230\u5B83\u7684 Cookie \u7684\u3002\u5982\u679C C \u5728\u5B83\u7684 Cookie \u4E0A\u6307\u5B9A\u4E86 Partitioned \u5C5E\u6027\uFF0C\u8FD9\u4E2A Cookie \u5C06\u4FDD\u5B58\u5728\u4E00\u4E2A\u7279\u6B8A\u7684\u5206\u533A jar \u4E2D\u3002 \u5B83\u53EA\u4F1A\u5728\u7AD9\u70B9 A \u4E2D\u901A\u8FC7 iframe \u5D4C\u5165\u7AD9\u70B9 C \u65F6\u624D\u4F1A\u751F\u6548\uFF0C\u6D4F\u89C8\u5668\u4F1A\u5224\u5B9A\u53EA\u4F1A\u5728\u9876\u7EA7\u7AD9\u70B9\u4E3A A \u65F6\u624D\u53D1\u9001\u8BE5 Cookie\u3002\u5F53\u7528\u6237\u8BBF\u95EE\u4E00\u4E2A\u65B0\u7AD9\u70B9\u65F6\uFF0C\u4F8B\u5982\u7AD9\u70B9 B\uFF0C\u5982\u679C\u4E5F\u5B83\u901A\u8FC7 iframe \u5D4C\u5165\u4E86\u7AD9\u70B9 C\uFF0C\u8FD9\u65F6\u5728\u7AD9\u70B9 B \u4E0B\u7684\u7AD9\u70B9 C \u662F\u65E0\u6CD5\u8BBF\u95EE\u5230\u4E4B\u524D\u5728 A \u4E0B\u9762\u8BBE\u7F6E\u7684\u90A3\u4E2A Cookie \u7684\u3002\u5982\u679C\u7528\u6237\u76F4\u63A5\u8BBF\u95EE\u7AD9\u70B9 C \uFF0C\u4E00\u6837\u4E5F\u662F\u8BBF\u95EE\u4E0D\u5230\u8FD9\u4E2A Cookie \u7684\u3002"),e("h4",{id:"_4-related-website-sets",tabindex:"-1"},[o("4. Related Website Sets "),e("a",{class:"header-anchor",href:"#_4-related-website-sets","aria-hidden":"true"},"#")]),e("p",null,"\u89E3\u51B3\u540C\u4E00\u4E2A\u516C\u53F8\u6216\u7EC4\u7EC7\u4E0B\u4E0D\u540C\u57DF\u540D\u7684\u6570\u636E\u5171\u4EAB\u80FD\u529B\u3002"),e("p",null,[o("\u53EF\u4EE5\u5C06\u591A\u4E2A\u7AD9\u70B9\u6807\u8BB0\u4E3A\u4E00\u65B9, \u4F8B\u5982 "),e("code",null,"taobao.com"),o(" \u548C "),e("code",null,"tmail.com"),o(" \u540C\u6837\u5C5E\u4E8E\u963F\u91CC, \u53EF\u4EE5\u6807\u8BB0\u4E3A\u540C\u4E00\u65B9")]),e("p",null,[o("\u9664\u4E86\u628A\u8FD9\u4E2A\u7AD9\u70B9\u5728\u81EA\u5DF1\u7684\u7F51\u7AD9\u4E0B\u90E8\u7F72\u4E00\u4EFD\uFF0C\u6709\u70B9\u5947\u8469\u7684\u662F\u6211\u4EEC\u8FD8\u9700\u8981\u901A\u8FC7 PR \u5C06\u5176 Google \u63D0\u4F9B\u7684 "),e("a",{href:"https://github.com/GoogleChrome/related-website-sets",target:"_blank",rel:"noopener"},"\u76F8\u5173\u7F51\u7AD9\u96C6 GitHub \u5B58\u50A8\u5E93"),o("\u3002\u7136\u540E\u7AD9\u70B9\u53EF\u4EE5\u4F7F\u7528 Storage Access API \u901A\u8FC7 requestStorageAccess() \u8BF7\u6C42\u8BBF\u95EE\u8DE8\u7AD9\u70B9 Cookie \uFF0C\u6216\u4F7F\u7528 requestStorageAccessFor() \u59D4\u6258\u8BBF\u95EE\u3002\u5F53\u7AD9\u70B9\u4F4D\u4E8E\u540C\u4E00\u7EC4\u5185\u65F6\uFF0C\u6D4F\u89C8\u5668\u5C06\u81EA\u52A8\u6388\u4E88\u8BBF\u95EE\u6743\u9650\uFF0C\u5E76\u4E14\u8DE8\u7AD9\u70B9 Cookie \u662F\u53EF\u7528\u7684\u3002")]),e("h4",{id:"_5-attribution-reporting-api",tabindex:"-1"},[o("5. Attribution Reporting API "),e("a",{class:"header-anchor",href:"#_5-attribution-reporting-api","aria-hidden":"true"},"#")]),e("p",null,"\u5728\u4E0D\u8FFD\u8E2A\u7528\u6237\u8DE8\u7AD9\u6D3B\u52A8\u7684\u60C5\u51B5\u4E0B\uFF0C\u63D0\u4F9B\u8DE8\u7AD9\u70B9\u7684\u5E7F\u544A\u5F52\u56E0\u3001\u8F6C\u5316\u5206\u6790\u80FD\u529B\u3002"),e("p",null,"\u4F7F\u7528\u65B9\u5F0F\u5927\u6982\u662F\u8FD9\u6837\u7684\uFF1A\u6211\u4EEC\u9996\u5148\u9700\u8981\u63D0\u4F9B\u4E00\u4E2A\u7528\u4E8E\u5B58\u50A8\u5F52\u56E0\u62A5\u544A\u6570\u636E\u7684\u63A5\u53E3\uFF0C\u7136\u540E\u5728 HTML a\u3001img \u3001iframe \u7B49\u6807\u7B7E\u4E0A\u8FFD\u52A0 attributionsrc\uFF1A"),e("pre",null,[e("code",{class:"language-html"},[e("div",{class:"shiki-container"},[e("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{color:"#858585"}},"<"),e("span",{style:{color:"#429988"}},"a"),e("span",{style:{color:"#DBD7CA"}}," "),e("span",{style:{color:"#E0A569"}},"href"),e("span",{style:{color:"#858585"}},"="),e("span",{style:{color:"#C98A7D"}},'"https://shoes.example/landing"')]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#DBD7CA"}},"  "),e("span",{style:{color:"#E0A569"}},"attributionsrc"),e("span",{style:{color:"#858585"}},"="),e("span",{style:{color:"#C98A7D"}},'"http://adtech.example/register-source?..."')]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#DBD7CA"}},"  "),e("span",{style:{color:"#E0A569"}},"target"),e("span",{style:{color:"#858585"}},"="),e("span",{style:{color:"#C98A7D"}},'"_blank"'),e("span",{style:{color:"#858585"}},">")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#DBD7CA"}},"Click me"),e("span",{style:{color:"#858585"}},"</"),e("span",{style:{color:"#429988"}},"a"),e("span",{style:{color:"#858585"}},">")]),o(`
`),e("span",{class:"line"}),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#858585"}},"<"),e("span",{style:{color:"#429988"}},"img"),e("span",{style:{color:"#DBD7CA"}}," "),e("span",{style:{color:"#E0A569"}},"href"),e("span",{style:{color:"#858585"}},"="),e("span",{style:{color:"#C98A7D"}},'"https://advertiser.example/landing"')]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#DBD7CA"}},"  "),e("span",{style:{color:"#E0A569"}},"attributionsrc"),e("span",{style:{color:"#858585"}},"="),e("span",{style:{color:"#C98A7D"}},'"https://adtech.example/register-source?..."'),e("span",{style:{color:"#858585"}},"/>")]),o(`
`),e("span",{class:"line"})])]),e("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{color:"#8E8F8B"}},"<"),e("span",{style:{color:"#2F8A89"}},"a"),e("span",{style:{color:"#393A34"}}," "),e("span",{style:{color:"#B58451"}},"href"),e("span",{style:{color:"#8E8F8B"}},"="),e("span",{style:{color:"#B56959"}},'"https://shoes.example/landing"')]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#393A34"}},"  "),e("span",{style:{color:"#B58451"}},"attributionsrc"),e("span",{style:{color:"#8E8F8B"}},"="),e("span",{style:{color:"#B56959"}},'"http://adtech.example/register-source?..."')]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#393A34"}},"  "),e("span",{style:{color:"#B58451"}},"target"),e("span",{style:{color:"#8E8F8B"}},"="),e("span",{style:{color:"#B56959"}},'"_blank"'),e("span",{style:{color:"#8E8F8B"}},">")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#393A34"}},"Click me"),e("span",{style:{color:"#8E8F8B"}},"</"),e("span",{style:{color:"#2F8A89"}},"a"),e("span",{style:{color:"#8E8F8B"}},">")]),o(`
`),e("span",{class:"line"}),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#8E8F8B"}},"<"),e("span",{style:{color:"#2F8A89"}},"img"),e("span",{style:{color:"#393A34"}}," "),e("span",{style:{color:"#B58451"}},"href"),e("span",{style:{color:"#8E8F8B"}},"="),e("span",{style:{color:"#B56959"}},'"https://advertiser.example/landing"')]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#393A34"}},"  "),e("span",{style:{color:"#B58451"}},"attributionsrc"),e("span",{style:{color:"#8E8F8B"}},"="),e("span",{style:{color:"#B56959"}},'"https://adtech.example/register-source?..."'),e("span",{style:{color:"#8E8F8B"}},"/>")]),o(`
`),e("span",{class:"line"})])])])])]),e("p",null,"\u6216\u8005\u901A\u8FC7 JavaScript \u8C03\u7528\u6CE8\u5165 attribution src\uFF1A"),e("pre",null,[e("code",{class:"language-javascript"},[e("div",{class:"shiki-container"},[e("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{color:"#CB7676"}},"const"),e("span",{style:{color:"#DBD7CA"}}," "),e("span",{style:{color:"#D4976C"}},"encodedUrl"),e("span",{style:{color:"#DBD7CA"}}," "),e("span",{style:{color:"#CB7676"}},"="),e("span",{style:{color:"#DBD7CA"}}," "),e("span",{style:{color:"#E0A569"}},"encodeURIComponent"),e("span",{style:{color:"#858585"}},"("),e("span",{style:{color:"#C98A7D"}},"'https://adtech.example/attribution_source?ad_id=...'"),e("span",{style:{color:"#858585"}},");")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#B8A965"}},"window"),e("span",{style:{color:"#858585"}},"."),e("span",{style:{color:"#A1B567"}},"open"),e("span",{style:{color:"#858585"}},"(")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#DBD7CA"}},"  "),e("span",{style:{color:"#C98A7D"}},'"https://shoes.example/landing"'),e("span",{style:{color:"#858585"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#DBD7CA"}},"  "),e("span",{style:{color:"#C98A7D"}},'"_blank"'),e("span",{style:{color:"#858585"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#DBD7CA"}},"  "),e("span",{style:{color:"#B8A965"}},"attributionsrc"),e("span",{style:{color:"#CB7676"}},"="),e("span",{style:{color:"#B8A965"}},"$"),e("span",{style:{color:"#858585"}},"{"),e("span",{style:{color:"#B8A965"}},"encodedUrl"),e("span",{style:{color:"#858585"}},"});")]),o(`
`),e("span",{class:"line"})])]),e("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{color:"#AB5959"}},"const"),e("span",{style:{color:"#393A34"}}," "),e("span",{style:{color:"#A65E2B"}},"encodedUrl"),e("span",{style:{color:"#393A34"}}," "),e("span",{style:{color:"#AB5959"}},"="),e("span",{style:{color:"#393A34"}}," "),e("span",{style:{color:"#B58451"}},"encodeURIComponent"),e("span",{style:{color:"#8E8F8B"}},"("),e("span",{style:{color:"#B56959"}},"'https://adtech.example/attribution_source?ad_id=...'"),e("span",{style:{color:"#8E8F8B"}},");")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#8C862B"}},"window"),e("span",{style:{color:"#8E8F8B"}},"."),e("span",{style:{color:"#6C7834"}},"open"),e("span",{style:{color:"#8E8F8B"}},"(")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#393A34"}},"  "),e("span",{style:{color:"#B56959"}},'"https://shoes.example/landing"'),e("span",{style:{color:"#8E8F8B"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#393A34"}},"  "),e("span",{style:{color:"#B56959"}},'"_blank"'),e("span",{style:{color:"#8E8F8B"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#393A34"}},"  "),e("span",{style:{color:"#8C862B"}},"attributionsrc"),e("span",{style:{color:"#AB5959"}},"="),e("span",{style:{color:"#8C862B"}},"$"),e("span",{style:{color:"#8E8F8B"}},"{"),e("span",{style:{color:"#8C862B"}},"encodedUrl"),e("span",{style:{color:"#8E8F8B"}},"});")]),o(`
`),e("span",{class:"line"})])])])])]),e("h4",{id:"_6-topics-api",tabindex:"-1"},[o("6. Topics API "),e("a",{class:"header-anchor",href:"#_6-topics-api","aria-hidden":"true"},"#")]),e("p",null,"\u5728\u4E0D\u4F9D\u8D56\u4E09\u65B9 Cookie \u7684\u60C5\u51B5\u4E0B\u7531\u6D4F\u89C8\u5668\u8FDB\u884C\u7528\u6237\u7684\u5174\u8DA3\u63A8\u65AD\u3002"),e("p",null,"\u901A\u8FC7 Topics API \uFF0C\u6D4F\u89C8\u5668\u53EF\u4EE5\u6839\u636E\u7528\u6237\u7684\u6D4F\u89C8\u6D3B\u52A8\u89C2\u5BDF\u5E76\u8BB0\u5F55\u7528\u6237\u611F\u5174\u8DA3\u7684\u4E3B\u9898\u3002\u8FD9\u4E9B\u4FE1\u606F\u53EA\u4F1A\u8BB0\u5F55\u5728\u7528\u6237\u7684\u8BBE\u5907\u4E0A\u3002\u7136\u540E\uFF0CTopics API \u53EF\u4EE5\u8BA9 API \u8C03\u7528\u8005\uFF08\u4F8B\u5982\u5E7F\u544A\u6280\u672F\u5E73\u53F0\uFF09\u8BBF\u95EE\u7528\u6237\u611F\u5174\u8DA3\u7684\u4E3B\u9898\uFF0C\u4F46\u4E0D\u4F1A\u900F\u9732\u6709\u5173\u7528\u6237\u6D4F\u89C8\u6D3B\u52A8\u7684\u5176\u4ED6\u4FE1\u606F\u3002"),e("pre",null,[e("code",{class:"language-javascript"},[e("div",{class:"shiki-container"},[e("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{color:"#CB7676"}},"const"),e("span",{style:{color:"#DBD7CA"}}," "),e("span",{style:{color:"#D4976C"}},"topics"),e("span",{style:{color:"#DBD7CA"}}," "),e("span",{style:{color:"#CB7676"}},"="),e("span",{style:{color:"#DBD7CA"}}," "),e("span",{style:{color:"#4D9375"}},"await"),e("span",{style:{color:"#DBD7CA"}}," "),e("span",{style:{color:"#B8A965"}},"document"),e("span",{style:{color:"#858585"}},"."),e("span",{style:{color:"#A1B567"}},"browsingTopics"),e("span",{style:{color:"#858585"}},"()")]),o(`
`),e("span",{class:"line"})])]),e("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{color:"#AB5959"}},"const"),e("span",{style:{color:"#393A34"}}," "),e("span",{style:{color:"#A65E2B"}},"topics"),e("span",{style:{color:"#393A34"}}," "),e("span",{style:{color:"#AB5959"}},"="),e("span",{style:{color:"#393A34"}}," "),e("span",{style:{color:"#1C6B48"}},"await"),e("span",{style:{color:"#393A34"}}," "),e("span",{style:{color:"#8C862B"}},"document"),e("span",{style:{color:"#8E8F8B"}},"."),e("span",{style:{color:"#6C7834"}},"browsingTopics"),e("span",{style:{color:"#8E8F8B"}},"()")]),o(`
`),e("span",{class:"line"})])])])])]),e("h4",{id:"_7-shared-storage-api",tabindex:"-1"},[o("7. Shared Storage API "),e("a",{class:"header-anchor",href:"#_7-shared-storage-api","aria-hidden":"true"},"#")]),e("p",null,"\u5728\u4FDD\u62A4\u7528\u6237\u9690\u79C1\u7684\u573A\u666F\u4E0B\u652F\u6301\u8DE8\u7AD9\u70B9\u4FE1\u606F\u5B58\u50A8\u548C\u8BFB\u53D6\u3002"),e("p",null,"\u50CF\u5176\u4ED6 JavaScript \u5B58\u50A8 API\uFF08\u4F8B\u5982 localStorage \u6216 indexedDB\uFF09\u4E00\u6837\uFF0C\u6211\u4EEC\u53EF\u4EE5\u968F\u65F6\u5199\u5165 Shared Storage \uFF0C\u4F46\u533A\u522B\u662F\u6211\u4EEC\u53EA\u80FD\u5728\u4E00\u4E2A\u5B89\u5168\u7684\u73AF\u5883\uFF08shared storage worklet\uFF09\u4E2D\u8BFB\u53D6\u5171\u4EAB\u5B58\u50A8\u7684\u503C\u3002"),e("h4",{id:"_8-fedcm",tabindex:"-1"},[o("8. FedCM "),e("a",{class:"header-anchor",href:"#_8-fedcm","aria-hidden":"true"},"#")]),e("p",null,"\u63D0\u4F9B\u4E00\u79CD\u6807\u51C6\u5316\u7684\u65B9\u5F0F\u8FDB\u884C\u7528\u6237\u8EAB\u4EFD\u9A8C\u8BC1\u548C\u51ED\u636E\u7BA1\u7406\u3002"),e("p",null,"FedCM\uFF08\u8054\u5408\u51ED\u8BC1\u7BA1\u7406\uFF09\u662F\u8054\u5408\u8EAB\u4EFD\u670D\u52A1\uFF08\u4F8B\u5982\u201C\u4F7F\u7528\u2026\u767B\u5F55\u201D\uFF09\u7684\u4E00\u79CD\u9690\u79C1\u4FDD\u62A4\u65B9\u6CD5\uFF0C\u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u8BE5\u65B9\u6CD5\u767B\u5F55\u7F51\u7AD9\uFF0C\u800C\u65E0\u9700\u4E0E\u8EAB\u4EFD\u670D\u52A1\u6216\u7F51\u7AD9\u5171\u4EAB\u5176\u4E2A\u4EBA\u4FE1\u606F\u3002"),e("h2",{id:"\u9644\u5F55",tabindex:"-1"},[o("\u9644\u5F55 "),e("a",{class:"header-anchor",href:"#\u9644\u5F55","aria-hidden":"true"},"#")]),e("ol",null,[e("li",null,[e("code",null,"SameSite: Lax"),o(" \u4E0B\u8BF7\u6C42")])]),e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"\u8BF7\u6C42\u7C7B\u578B"),e("th",null,"\u793A\u4F8B"),e("th",null,"\u6B63\u5E38\u60C5\u51B5"),e("th",null,"Lax")])]),e("tbody",null,[e("tr",null,[e("td",null,"\u94FE\u63A5"),e("td",null,[e("code",null,'<a href="..."></a>')]),e("td",null,"\u53D1\u9001 Cookie"),e("td",null,"\u53D1\u9001 Cookie")]),e("tr",null,[e("td",null,"\u9884\u52A0\u8F7D"),e("td",null,[e("code",null,'<link rel="prerender" href="..."/>')]),e("td",null,"\u53D1\u9001 Cookie"),e("td",null,"\u53D1\u9001 Cookie")]),e("tr",null,[e("td",null,"GET \u8868\u5355"),e("td",null,[e("code",null,'<form method="GET" action="..."> ')]),e("td",null,"\u53D1\u9001 Cookie"),e("td",null,"\u53D1\u9001 Cookie")]),e("tr",null,[e("td",null,"POST \u8868\u5355"),e("td",null,[e("code",null,'<form method="POST" action="...">')]),e("td",null,"\u53D1\u9001 Cookie"),e("td",null,"\u4E0D\u53D1\u9001")]),e("tr",null,[e("td",null,"iframe"),e("td",null,[e("code",null,'<iframe src="..."></iframe> ')]),e("td",null,"\u53D1\u9001 Cookie"),e("td",null,"\u4E0D\u53D1\u9001")]),e("tr",null,[e("td",null,"AJAX"),e("td",null,[e("code",null,'$.get("...") ')]),e("td",null,"\u53D1\u9001 Cookie"),e("td",null,"\u4E0D\u53D1\u9001")]),e("tr",null,[e("td",null,"Image"),e("td",null,[e("code",null,'<img src="..."> ')]),e("td",null,"\u53D1\u9001 Cookie"),e("td",null,"\u4E0D\u53D1\u9001")])])]),e("p",null,"Lax \u4E3B\u8981\u89E3\u51B3 Strict \u7684\u6613\u7528\u6027\u95EE\u9898\uFF0C\u7528\u6237\u4ECE\u7B2C\u4E09\u65B9\u9875\u9762\u8BBF\u95EE\u4E00\u4E2A\u5DF2\u767B\u5F55\u7684\u7CFB\u7EDF\u65F6\uFF0C\u7531\u4E8E\u672A\u643A\u5E26Cookie\uFF0C\u603B\u662F\u9700\u8981\u91CD\u65B0\u767B\u5F55\u3002\u4F46\u7531\u4E8E\u73B0\u5728\u57FA\u672C\u4E0A\u6240\u6709\u7F51\u7AD9\u90FD\u662F SPA + ajax \u8BF7\u6C42\uFF0Ca \u94FE\u63A5\u8DF3\u8F6C\u643A\u5E26\u7684 Cookie \u4E00\u822C\u53EF\u4EE5\u5FFD\u89C6"),e("h2",{id:"\u5F15\u7528",tabindex:"-1"},[o("\u5F15\u7528 "),e("a",{class:"header-anchor",href:"#\u5F15\u7528","aria-hidden":"true"},"#")]),e("p",null,"\u672C\u6587\u4E3B\u8981\u4E3A\u4FE1\u606F\u6574\u7406"),e("ul",null,[e("li",null,[o("[1] "),e("a",{href:"https://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html",target:"_blank",rel:"noopener"},"\u6D4F\u89C8\u5668\u540C\u6E90\u653F\u7B56\u53CA\u5176\u89C4\u907F\u65B9\u6CD5")]),e("li",null,[o("[2] "),e("a",{href:"https://www.ruanyifeng.com/blog/2019/09/cookie-samesite.html",target:"_blank",rel:"noopener"},"Cookie \u7684 SameSite \u5C5E\u6027")]),e("li",null,[o("[3] "),e("a",{href:"https://groups.google.com/a/chromium.org/g/blink-dev/c/RG0oLYQ0f2I/m/xMSdsEAzBwAJ?pli=1",target:"_blank",rel:"noopener"},"Intent to Deprecate & Remove: Third-Party Cookies")]),e("li",null,[o("[4] "),e("a",{href:"https://developers.google.com/privacy-sandbox/blog/cookie-countdown-2023oct",target:"_blank",rel:"noopener"},"Chrome \u5B98\u65B9 - \u7B2C\u4E09\u65B9 Cookie \u5012\u8BA1\u65F6")]),e("li",null,[o("[5] "),e("a",{href:"https://blog.conardli.top/2022/03/22/web/cookie-chips/",target:"_blank",rel:"noopener"},"\u804A\u804A Cookie \u7684 CHIPS \u673A\u5236")]),e("li",null,[o("[6] "),e("a",{href:"https://www.chromium.org/Home/chromium-privacy/privacy-sandbox/third-party-cookie-phaseout/",target:"_blank",rel:"noopener"},"Third-Party Cookie Deprecation Testing and Debugging")])])],-1),B="\u7981\u7528\u7B2C\u4E09\u65B9 Cookie",b="2024\u5E74 Chrome \u5168\u9762\u7981\u7528\u7B2C\u4E09\u65B9 Cookie\uFF0C\u6574\u7406\u4E86\u6240\u6709\u76F8\u5173\u5185\u5BB9\u548C\u5E94\u5BF9\u63AA\u65BD",x="2023-12-17T00:00:00.000Z",_="zh",S="30min",D="/imgs/third-party-cookie/tld+1.png",E=[{property:"og:title",content:"\u7981\u7528\u7B2C\u4E09\u65B9 Cookie"},{property:"og:description",content:"2024\u5E74 Chrome \u5168\u9762\u7981\u7528\u7B2C\u4E09\u65B9 Cookie\uFF0C\u6574\u7406\u4E86\u6240\u6709\u76F8\u5173\u5185\u5BB9\u548C\u5E94\u5BF9\u63AA\u65BD"},{name:"description",content:"2024\u5E74 Chrome \u5168\u9762\u7981\u7528\u7B2C\u4E09\u65B9 Cookie\uFF0C\u6574\u7406\u4E86\u6240\u6709\u76F8\u5173\u5185\u5BB9\u548C\u5E94\u5BF9\u63AA\u65BD"},{property:"og:image",content:"/imgs/third-party-cookie/tld+1.png"},{name:"twitter:card",content:"summary_large_image"}],F={__name:"third-party-cookie",setup(m,{expose:s}){const l={title:"\u7981\u7528\u7B2C\u4E09\u65B9 Cookie",description:"2024\u5E74 Chrome \u5168\u9762\u7981\u7528\u7B2C\u4E09\u65B9 Cookie\uFF0C\u6574\u7406\u4E86\u6240\u6709\u76F8\u5173\u5185\u5BB9\u548C\u5E94\u5BF9\u63AA\u65BD",date:"2023-12-17T00:00:00.000Z",lang:"zh",duration:"30min",image:"/imgs/third-party-cookie/tld+1.png",meta:[{property:"og:title",content:"\u7981\u7528\u7B2C\u4E09\u65B9 Cookie"},{property:"og:description",content:"2024\u5E74 Chrome \u5168\u9762\u7981\u7528\u7B2C\u4E09\u65B9 Cookie\uFF0C\u6574\u7406\u4E86\u6240\u6709\u76F8\u5173\u5185\u5BB9\u548C\u5E94\u5BF9\u63AA\u65BD"},{name:"description",content:"2024\u5E74 Chrome \u5168\u9762\u7981\u7528\u7B2C\u4E09\u65B9 Cookie\uFF0C\u6574\u7406\u4E86\u6240\u6709\u76F8\u5173\u5185\u5BB9\u548C\u5E94\u5BF9\u63AA\u65BD"},{property:"og:image",content:"/imgs/third-party-cookie/tld+1.png"},{name:"twitter:card",content:"summary_large_image"}]};return s({frontmatter:l}),t({title:"\u7981\u7528\u7B2C\u4E09\u65B9 Cookie",meta:[{property:"og:title",content:"\u7981\u7528\u7B2C\u4E09\u65B9 Cookie"},{property:"og:description",content:"2024\u5E74 Chrome \u5168\u9762\u7981\u7528\u7B2C\u4E09\u65B9 Cookie\uFF0C\u6574\u7406\u4E86\u6240\u6709\u76F8\u5173\u5185\u5BB9\u548C\u5E94\u5BF9\u63AA\u65BD"},{name:"description",content:"2024\u5E74 Chrome \u5168\u9762\u7981\u7528\u7B2C\u4E09\u65B9 Cookie\uFF0C\u6574\u7406\u4E86\u6240\u6709\u76F8\u5173\u5185\u5BB9\u548C\u5E94\u5BF9\u63AA\u65BD"},{property:"og:image",content:"/imgs/third-party-cookie/tld+1.png"},{name:"twitter:card",content:"summary_large_image"}]}),(k,C)=>{const n=a;return r(),i(n,{frontmatter:l},{default:c(()=>[y]),_:1})}}};export{x as date,F as default,b as description,S as duration,D as image,_ as lang,E as meta,B as title};
